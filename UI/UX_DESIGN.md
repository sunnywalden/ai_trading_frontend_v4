# æŒä»“è¯„ä¼° & å®è§‚é£é™©åˆ†æ - äº§å“è®¾è®¡æ–‡æ¡£

## ä¸€ã€äº§å“æ¦‚è¿°

### 1.1 ç›®æ ‡
åœ¨ç°æœ‰è¡Œä¸ºè¯„åˆ†ï¼ˆå†å²äº¤æ˜“ï¼‰åŸºç¡€ä¸Šï¼Œæ–°å¢ä¸‰å¤§æ ¸å¿ƒæ¨¡å—ï¼š
- **æŒä»“è¯„ä¼°**ï¼šå®æ—¶è¯„ä¼°å½“å‰æŒä»“æ ‡çš„è´¨é‡ã€é£é™©ã€æœºä¼š
- **å®è§‚é£é™©åˆ†æ**ï¼šåå°”è¡—è§†è§’çš„ç³»ç»Ÿæ€§é£é™©ç›‘æ§
- **æ½œåœ¨æœºä¼š**ï¼šæ¯æ—¥è‡ªåŠ¨æ‰«æç§‘æŠ€è‚¡è‚¡ç¥¨æ± ï¼Œè¾“å‡º 1-3 åªé«˜åˆ†æ ‡çš„

### 1.2 æ•´ä½“æ¶æ„
```
AI Trading System v8
â”œâ”€â”€ è¡Œä¸ºè¯„åˆ†æ¨¡å— (å·²å®ç°)
â”‚   â”œâ”€â”€ åŸºäºå†å²äº¤æ˜“æ•°æ®çš„è¡Œä¸ºç”»åƒ
â”‚   â”œâ”€â”€ è‡è¥ç‹—è‹Ÿè¯„åˆ† (Sell-Fly Score)
â”‚   â”œâ”€â”€ è¿‡åº¦äº¤æ˜“è¯„åˆ† (Overtrading Score)
â”‚   â””â”€â”€ æŠ¥å¤æ€§äº¤æ˜“è¯„åˆ† (Revenge Trading Score)
â”œâ”€â”€ æŒä»“è¯„ä¼°æ¨¡å— (å·²å®ç°)
â”‚   â”œâ”€â”€ æŒä»“æ ‡çš„ç»¼åˆè¯„åˆ† (æŠ€æœ¯+åŸºæœ¬é¢+æƒ…ç»ª)
â”‚   â”œâ”€â”€ æ—¥çº¿è¶‹åŠ¿å¿«ç…§ (Wall Streetäº¤æ˜“å‘˜è§†è§’)
â”‚   â”œâ”€â”€ æŠ€æœ¯åˆ†æ (è¶‹åŠ¿ã€RSIã€MACDã€å¸ƒæ—å¸¦ç­‰)
â”‚   â”œâ”€â”€ åŸºæœ¬é¢åˆ†æ (ä¼°å€¼ã€ç›ˆåˆ©ã€æˆé•¿æ€§)
â”‚   â”œâ”€â”€ å…³é”®ä»·ä½è¿½è¸ª (æ”¯æ’‘/é˜»åŠ›ä½)
â”‚   â””â”€â”€ æ“ä½œå»ºè®® (BUY/HOLD/SELL)
â”œâ”€â”€ å®è§‚é£é™©åˆ†ææ¨¡å— (å·²å®ç°)
    â”œâ”€â”€ è´§å¸æ”¿ç­–é£é™© (æ”¿ç­–ã€é€šèƒ€ã€åˆ©ç‡)
    â”œâ”€â”€ åœ°ç¼˜æ”¿æ²»é£é™© (å†²çªã€åˆ¶è£ã€é€‰ä¸¾)
    â”œâ”€â”€ è¡Œä¸šæ³¡æ²«é£é™© (ä¼°å€¼ã€æƒ…ç»ªã€æ æ†)
    â”œâ”€â”€ ç»æµå‘¨æœŸé£é™© (GDPã€PMIã€å¤±ä¸šç‡)
    â””â”€â”€ å¸‚åœºæƒ…ç»ªé£é™© (VIXã€Put/Callã€èµ„é‡‘æµå‘)
â””â”€â”€ æ½œåœ¨æœºä¼šæ¨¡å— (å·²å®ç°)
  â”œâ”€â”€ åŠ¨æ€è‚¡ç¥¨æ±  (æŒ‰å¸‚å€¼/è¡Œä¸šç­›é€‰ï¼šä¸­å¤§å‹ç§‘æŠ€è‚¡)
  â”œâ”€â”€ ä¸‰ç»´è¯„åˆ†é—¨æ§› (æŠ€æœ¯/åŸºæœ¬é¢/æƒ…ç»ªå‡ â‰¥ 75)
  â”œâ”€â”€ å®è§‚é£é™©èåˆ (HIGH/EXTREME æ—¶é˜ˆå€¼æé«˜åˆ° 80)
  â”œâ”€â”€ æ¯æ—¥å®šæ—¶ä»»åŠ¡ (åŒ—äº¬æ—¶é—´ 20:30 è‡ªåŠ¨è¿è¡Œ)
  â””â”€â”€ ç»“æœè½åº“ä¸å›æº¯ (run è¡¨ + items è¡¨)
```

### 1.3 äº§å“æ ¸å¿ƒçº¦æŸ (å¿…é¡»éµå®ˆ)

**ä¸‰å¤§çº¦æŸåŸåˆ™**ï¼ˆæ¥è‡ª `Overview.md` ä¸ `FRONTEND_POSITIONS_ASSESSMENT_GUIDE.md`ï¼‰ï¼š

1. **å®è§‚ä¸çŸ­æœŸè¶‹åŠ¿ä¸è”åŠ¨**
   - å®è§‚é£é™©æ¨¡å—ï¼ˆ`/api/v1/macro/...`ï¼‰ç‹¬ç«‹è¾“å‡ºï¼Œä¸å‚ä¸æ—¥çº¿çŸ­æœŸè¶‹åŠ¿åˆ¤æ–­
   - å‰ç«¯å‘ˆç°ï¼šå®è§‚é£é™©ä¸æŒä»“è¯„ä¼°/æ—¥çº¿è¶‹åŠ¿åˆ†åŒºå±•ç¤ºï¼Œä¸æ··ä¸ºä¸€ä¸ªä¿¡å·æº

2. **è¶‹åŠ¿å¿«ç…§æŒä¹…åŒ–**
   - æ—¥çº¿èµ°åŠ¿åˆ†æå†™å…¥ `position_trend_snapshots` è¡¨ï¼ˆæ¯æ—¥æ¯æ ‡çš„åªä¿ç•™æœ€æ–°å¿«ç…§ï¼‰
   - æŒä»“è¯„ä¼°æ¥å£ç›´æ¥è¯»å–å¿«ç…§ï¼Œä¸æ˜¯æ¯æ¬¡éƒ½è°ƒç”¨ AI
   - `trend_snapshot` å¯èƒ½ä¸ºç©ºï¼ˆæœªç”Ÿæˆ/æœªåˆ·æ–°/æ— æ•°æ®ï¼‰ï¼Œåº”æœ‰ç©ºæ€ä¸æŒ‰é’®è§¦å‘åˆ·æ–°

3. **ä¸è¾“å‡ºè¶‹åŠ¿ç½®ä¿¡åº¦**
   - **å‰ç«¯ä¸è¦è®¾è®¡/æœŸå¾…ä»»ä½•è¶‹åŠ¿ç½®ä¿¡åº¦å­—æ®µï¼ˆä¾‹å¦‚ 70%/0.7 ç­‰ï¼‰**
   - å…è®¸å±•ç¤ºï¼šè¶‹åŠ¿æ–¹å‘ã€è¶‹åŠ¿å¼ºåº¦ï¼ˆç®—æ³•å¼ºåº¦æ‰“åˆ†ï¼Œä¸å«ç½®ä¿¡åº¦ï¼‰ã€è§¦å‘æ¡ä»¶ã€å…³é”®ä»·ä½ä¸æ“ä½œæ¡ä»¶

### 1.4 UI/UX è®¾è®¡ç†å¿µ

**æ ¸å¿ƒè®¾è®¡åŸåˆ™**ï¼š
- **æ¨¡å—åŒ–å¯¼èˆª**ï¼šé‡‡ç”¨ Vue Router å®ç°å››ä¸ªç‹¬ç«‹é¡µé¢ï¼Œè€Œé Tab é¡µåˆ‡æ¢
- **å…¨å±€é…ç½®ç®¡ç†**ï¼šwindow_daysï¼ˆæ—¶é—´çª—å£ï¼‰ä½œä¸ºå…¨å±€å‚æ•°ï¼Œè·¨é¡µé¢å…±äº«
- **é¡µé¢çº§è¯´æ˜æŒ‡å—**ï¼šå°†è¯„åˆ†æ ‡å‡†å’ŒæŒ‡æ ‡è¯´æ˜æ”¾åœ¨å¯¹åº”é¡µé¢åº•éƒ¨ï¼Œè€Œéå…¨å±€ä¾§è¾¹æ 
- **å‹å¥½é”™è¯¯æç¤º**ï¼šè¶…æ—¶ã€ç½‘ç»œé”™è¯¯ç­‰å¼‚å¸¸æƒ…å†µæä¾›ä¸­æ–‡å‹å¥½æç¤º
- **æ·±è‰²ä¸»é¢˜**ï¼šä¸“ä¸šé‡‘èäº¤æ˜“é£æ ¼ï¼Œå‡å°‘è§†è§‰ç–²åŠ³

---

## äºŒã€å‰ç«¯æ¶æ„ä¸å®ç°

### 2.1 æŠ€æœ¯æ ˆ

**æ ¸å¿ƒæ¡†æ¶**ï¼š
- Vue 3.5.0 (Composition API + TypeScript)
- Vue Router 4.x (è·¯ç”±ç®¡ç†)
- Vite 7.3.0 (æ„å»ºå·¥å…·)
- Axios 1.7.0 (HTTP å®¢æˆ·ç«¯)

**å¼€å‘ç¯å¢ƒ**ï¼š
- TypeScript 5.7.3
- Node.js (ESM æ¨¡å¼)

### 2.2 é¡µé¢æ¶æ„

#### 2.2.1 æ€»ä½“å¸ƒå±€
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AI Trading Â· æ§åˆ¶å¡”                          â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚ â”‚ ä¾§è¾¹æ    â”‚ â”‚ ä¸»å†…å®¹åŒº                   â”‚  â”‚
â”‚ â”‚         â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
â”‚ â”‚ å¯¼èˆªèœå• â”‚ â”‚ â”‚ Router View         â”‚   â”‚  â”‚
â”‚ â”‚ ğŸ¯ è¡Œä¸º â”‚ â”‚ â”‚ (é¡µé¢å†…å®¹åŠ¨æ€åˆ‡æ¢)   â”‚   â”‚  â”‚
â”‚ â”‚ ğŸ“Š æŒä»“ â”‚ â”‚ â”‚                     â”‚   â”‚  â”‚
â”‚ â”‚ ğŸŒ å®è§‚ â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚
â”‚ â”‚ ğŸ’¡ æœºä¼š â”‚ â”‚                           â”‚  â”‚
â”‚ â”‚         â”‚ â”‚                           â”‚  â”‚
â”‚ â”‚         â”‚ â”‚ Footer (ç‰ˆæœ¬ä¿¡æ¯)          â”‚  â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**å¸ƒå±€ç‰¹ç‚¹**ï¼š
- å·¦ä¾§å›ºå®šå®½åº¦ä¾§è¾¹æ  (260px)
- å¯¼èˆªé‡‡ç”¨ `<router-link>` å®ç°é¡µé¢åˆ‡æ¢
- ä¸»å†…å®¹åŒºä½¿ç”¨ `<router-view>` æ¸²æŸ“å½“å‰è·¯ç”±ç»„ä»¶
- å“åº”å¼è®¾è®¡ï¼šç§»åŠ¨ç«¯ä¾§è¾¹æ è‡ªåŠ¨æŠ˜å 

#### 2.2.2 è·¯ç”±é…ç½®
```typescript
// src/router/index.ts
const routes = [
  {
    path: '/',
    redirect: '/behavior'
  },
  {
    path: '/behavior',
    name: 'BehaviorScore',
    component: () => import('../views/BehaviorScorePage.vue'),
    meta: { title: 'è¡Œä¸ºè¯„åˆ†' }
  },
  {
    path: '/positions',
    name: 'Positions',
    component: () => import('../views/PositionsPage.vue'),
    meta: { title: 'æŒä»“è¯„ä¼°' }
  },
  {
    path: '/macro',
    name: 'MacroRisk',
    component: () => import('../views/MacroRiskPage.vue'),
    meta: { title: 'å®è§‚é£é™©' }
  },
  {
    path: '/opportunities',
    name: 'Opportunities',
    component: () => import('../views/OpportunitiesPage.vue'),
    meta: { title: 'æ½œåœ¨æœºä¼š' }
  }
];
```

**è·¯ç”±ç‰¹æ€§**ï¼š
- æ‡’åŠ è½½ (Lazy Loading)ï¼šæŒ‰éœ€åŠ è½½é¡µé¢ç»„ä»¶ï¼Œä¼˜åŒ–é¦–å±åŠ è½½é€Ÿåº¦
- å…ƒä¿¡æ¯ (Meta)ï¼šè®¾ç½®é¡µé¢æ ‡é¢˜ï¼Œè‡ªåŠ¨æ›´æ–°æµè§ˆå™¨ Tab æ ‡é¢˜
- é»˜è®¤è·¯ç”±ï¼šè®¿é—®æ ¹è·¯å¾„è‡ªåŠ¨è·³è½¬åˆ°è¡Œä¸ºè¯„åˆ†é¡µé¢
- è¿‡æ¸¡åŠ¨ç”»ï¼šè·¯ç”±åˆ‡æ¢æ—¶ä½¿ç”¨ fade æ¸å˜æ•ˆæœ

#### 2.2.3 å…¨å±€çŠ¶æ€ç®¡ç†
```typescript
// src/config/global.ts
export const appConfig = reactive({
  windowDays: 15  // é»˜è®¤15å¤©æ—¶é—´çª—å£
});

export function updateWindowDays(days: number) {
  appConfig.windowDays = days;
}
```

**å…¨å±€é…ç½®ç‰¹ç‚¹**ï¼š
- ä½¿ç”¨ Vue 3 Reactive å®ç°å“åº”å¼é…ç½®
- `windowDays` å‚æ•°è·¨é¡µé¢å…±äº«
- ä»»ä½•é¡µé¢ä¿®æ”¹åï¼Œå…¶ä»–é¡µé¢è‡ªåŠ¨åŒæ­¥

### 2.3 é¡µé¢è¯¦ç»†è®¾è®¡

#### 2.3.1 è¡Œä¸ºè¯„åˆ†é¡µé¢ (BehaviorScorePage.vue)

**é¡µé¢åŠŸèƒ½**ï¼š
- æ˜¾ç¤ºåŸºäºå†å²äº¤æ˜“çš„è¡Œä¸ºç”»åƒ
- å±•ç¤ºè¡Œä¸ºè¯„åˆ†ã€è‡è¥ç‹—è‹Ÿã€è¿‡åº¦äº¤æ˜“ã€æŠ¥å¤æ€§äº¤æ˜“å››ä¸ªç»´åº¦
- Greeks é£é™©æ°´ä½å¯è§†åŒ–
- æ”¯æŒçª—å£å¤©æ•°è°ƒæ•´å’Œè¡Œä¸ºè¯„åˆ†é‡ç®—

**æ ¸å¿ƒç»„ä»¶**ï¼š
```
BehaviorScorePage
â”œâ”€â”€ RiskSummaryCard (é£é™©æ€»è§ˆå¡ç‰‡)
â”œâ”€â”€ GreeksWaterLevel (Greeksæ°´ä½å›¾)
â”œâ”€â”€ SymbolBehaviorCard Ã— N (æ ‡çš„è¡Œä¸ºå¡ç‰‡)
â””â”€â”€ BehaviorGuideline (è¡Œä¸ºè¯„åˆ†è¯´æ˜)
```

**äº¤äº’åŠŸèƒ½**ï¼š
- çª—å£å¤©æ•°è°ƒæ•´ï¼šå®æ—¶ä¿®æ”¹ `windowDays` å¹¶é‡æ–°åŠ è½½æ•°æ®
- é‡æ–°è®¡ç®—æŒ‰é’®ï¼šè°ƒç”¨ `/api/v1/behavior/rebuild` é‡ç®—è¡Œä¸ºè¯„åˆ†
- åŠ è½½çŠ¶æ€ï¼šæ˜¾ç¤º"æ­£åœ¨é‡ç®—..."æç¤º
- é”™è¯¯å¤„ç†ï¼šè¶…æ—¶æ˜¾ç¤º"â±ï¸ è¯·æ±‚è¶…æ—¶ï¼Œè¯·ç¨åå†è¯•ï¼"

**æ•°æ®æµ**ï¼š
```
ç”¨æˆ·è¾“å…¥ â†’ updateWindowDays() â†’ å…¨å±€é…ç½®æ›´æ–° 
         â†’ loadAiState() â†’ fetchAiState(windowDays)
         â†’ åç«¯ API â†’ æ›´æ–°é¡µé¢æ•°æ®
```

#### 2.3.2 æŒä»“è¯„ä¼°é¡µé¢ (PositionsPage.vue)

**é¡µé¢åŠŸèƒ½**ï¼š
- å±•ç¤ºå½“å‰æŒä»“æ ‡çš„çš„ç»¼åˆè¯„åˆ†
- æŠ€æœ¯é¢ã€åŸºæœ¬é¢ã€æƒ…ç»ªé¢ä¸‰ç»´åº¦è¯„åˆ†
- æ˜¾ç¤ºæŒä»“å¸‚å€¼ã€ç›ˆäºã€é£é™©ç­‰çº§
- æä¾›æ“ä½œå»ºè®® (BUY/HOLD/SELL)

**é¡µé¢å¸ƒå±€**ï¼š
```
PositionsPage
â”œâ”€â”€ Header (æ ‡é¢˜ + åˆ·æ–°æŒ‰é’®)
â”œâ”€â”€ SummaryBar (æ±‡æ€»ä¿¡æ¯æ¡)
â”‚   â”œâ”€â”€ æ€»æŒä»“æ•°
â”‚   â”œâ”€â”€ æ€»å¸‚å€¼
â”‚   â”œâ”€â”€ æ€»ç›ˆäº
â”‚   â”œâ”€â”€ å¹³å‡è¯„åˆ†
â”‚   â”œâ”€â”€ é«˜é£é™©æ•°é‡
â”‚   â””â”€â”€ BUYæ¨èæ•°é‡
â”œâ”€â”€ PositionScoreCard Ã— N (æŒä»“è¯„åˆ†å¡ç‰‡)
â”‚   â”œâ”€â”€ åŸºæœ¬ä¿¡æ¯ï¼ˆæ ‡çš„/ä»“ä½/å¸‚å€¼/ç›ˆäºï¼‰
â”‚   â”œâ”€â”€ ç»¼åˆè¯„åˆ†ï¼ˆoverall_scoreï¼‰
â”‚   â”œâ”€â”€ ä¸‰ç»´è¯„åˆ†æ¡ï¼ˆæŠ€æœ¯/åŸºæœ¬é¢/æƒ…ç»ªï¼‰
â”‚   â”œâ”€â”€ é£é™©ç­‰çº§ï¼ˆrisk_levelï¼‰
â”‚   â”œâ”€â”€ æ“ä½œå»ºè®®ï¼ˆrecommendationï¼‰
â”‚   â””â”€â”€ æ—¥çº¿è¶‹åŠ¿å¿«ç…§ï¼ˆTrendSnapshotCardï¼‰
â”‚       â”œâ”€â”€ è¶‹åŠ¿æ–¹å‘ & å¼ºåº¦
â”‚       â”œâ”€â”€ RSI/MACD/å¸ƒæ—å¸¦çŠ¶æ€
â”‚       â”œâ”€â”€ æ”¯æ’‘/é˜»åŠ›ä½
â”‚       â”œâ”€â”€ é‡èƒ½æ¯”ç‡
â”‚       â””â”€â”€ AIæ‘˜è¦ï¼ˆäº¤æ˜“å‘˜è§†è§’ï¼‰
â””â”€â”€ PositionsGuideline (æŒä»“è¯„ä¼°è¯´æ˜)
```

**è¶‹åŠ¿å¿«ç…§å¡ç‰‡è®¾è®¡ (TrendSnapshotCard)**ï¼š
- **ç©ºæ€**ï¼šæ˜¾ç¤º"å°šæœªç”Ÿæˆä»Šæ—¥å¿«ç…§" + "åˆ·æ–°è¯„ä¼°"æŒ‰é’®
- **è¶‹åŠ¿æ–¹å‘**ï¼šå›¾æ ‡ + é¢œè‰²ï¼ˆBULLISH=ç»¿è‰²ä¸Šç®­å¤´ï¼ŒBEARISH=çº¢è‰²ä¸‹ç®­å¤´ï¼ŒSIDEWAYS=é»„è‰²æ¨ªçº¿ï¼‰
- **è¶‹åŠ¿å¼ºåº¦**ï¼šè¿›åº¦æ¡æˆ–åˆ»åº¦æ˜¾ç¤ºï¼ˆ0-100ï¼Œæ ‡æ³¨ä¸º"è¶‹åŠ¿å¼ºåº¦"è€Œé"ç½®ä¿¡åº¦"ï¼‰
- **å…³é”®ä½**ï¼šæ”¯æ’‘/é˜»åŠ›ä½åˆ—è¡¨ï¼ˆæ˜¾ç¤ºå‰2-3ä¸ªï¼Œå…¶ä½™æŠ˜å ï¼‰
- **é‡èƒ½**ï¼š`volume_ratio` > 1 æ”¾é‡ï¼ˆç»¿è‰²ï¼‰ï¼Œ< 1 ç¼©é‡ï¼ˆæ©™è‰²ï¼‰
- **AIæ‘˜è¦**ï¼šWall Streetäº¤æ˜“å‘˜é£æ ¼è§£è¯»ï¼Œä½œä¸º"äº¤æ˜“å‘˜æ‘˜è¦"å±•ç¤º
- **æ—¶é—´æˆ³**ï¼šæ˜¾ç¤ºå¿«ç…§ç”Ÿæˆæ—¶é—´

**æ ¸å¿ƒæ•°æ®å±•ç¤º**ï¼š
```typescript
interface Position {
  symbol: string;
  quantity: number;
  avg_cost: number;
  current_price: number;
  market_value: number;
  unrealized_pnl: number;
  unrealized_pnl_percent: number;
  overall_score: number;      // ç»¼åˆè¯„åˆ† 0-100
  technical_score: number;    // æŠ€æœ¯é¢ 0-100
  fundamental_score: number;  // åŸºæœ¬é¢ 0-100
  sentiment_score: number;    // æƒ…ç»ªé¢ 0-100
  recommendation: string;     // BUY/STRONG_BUY/HOLD/REDUCE/SELL
  risk_level: string;         // LOW/MEDIUM/HIGH/EXTREME
  target_position: number;    // ç›®æ ‡ä»“ä½
  stop_loss: number;          // æ­¢æŸä»·
  take_profit: number;        // æ­¢ç›ˆä»·
  trend_snapshot: TrendSnapshot | null;  // æ—¥çº¿è¶‹åŠ¿å¿«ç…§ï¼ˆå¯èƒ½ä¸ºç©ºï¼‰
}

interface TrendSnapshot {
  symbol: string;
  trend_direction?: string;         // BULLISH/BEARISH/SIDEWAYS
  trend_strength?: number;          // è¶‹åŠ¿å¼ºåº¦ (æ•´æ•°ï¼Œéç½®ä¿¡åº¦)
  trend_description?: string;       // è¶‹åŠ¿æè¿°
  
  // RSIæŒ‡æ ‡
  rsi_value?: number;
  rsi_status?: string;              // OVERSOLD/NEUTRAL/OVERBOUGHT
  
  // MACDæŒ‡æ ‡
  macd_status?: string;             // BULLISH_CROSSOVER/BEARISH_CROSSOVER/...
  macd_signal?: number;
  
  // å¸ƒæ—å¸¦
  bollinger_position?: string;      // å½“å‰ä»·æ ¼åœ¨å¸ƒæ—å¸¦çš„ä½ç½®
  volume_ratio?: number;            // å½“å‰é‡/20æ—¥å‡é‡
  
  // å…³é”®ä»·ä½
  support_levels: number[];         // æ”¯æ’‘ä½
  resistance_levels: number[];      // é˜»åŠ›ä½
  
  // AIè§£è¯»ï¼ˆWall Streeté£æ ¼ï¼ŒOpenAIå¤±è´¥ä¼šé™çº§ä¸ºè§„åˆ™æ‘˜è¦ï¼‰
  ai_summary?: string;
  timestamp: string;                // ISOæ—¶é—´
}
```

**æ ¸å¿ƒAPIæ¥å£**ï¼š
- è·å–æŒä»“è¯„ä¼°ï¼š`GET /api/v1/positions/assessment`
- åˆ·æ–°è¶‹åŠ¿å¿«ç…§ï¼š`POST /api/v1/positions/refresh`ï¼ˆæ”¯æŒå•æ ‡çš„æˆ–å…¨éƒ¨åˆ·æ–°ï¼‰
- æŠ€æœ¯åˆ†ææ˜ç»†ï¼š`GET /api/v1/positions/{symbol}/technical?timeframe=1D&force_refresh=false`

**äº¤äº’åŠŸèƒ½**ï¼š
1. **é¡µé¢åˆå§‹åŒ–**ï¼š
   - è°ƒç”¨ `GET /api/v1/positions/assessment` è·å–æŒä»“åˆ—è¡¨ï¼ˆå«å¿«ç…§ï¼‰
   - æ˜¾ç¤º"æ­£åœ¨åŠ è½½æŒä»“æ•°æ®..."æç¤º

2. **è¶‹åŠ¿å¿«ç…§åˆ·æ–°**ï¼ˆç”¨æˆ·è§¦å‘ï¼‰ï¼š
   - å…¨éƒ¨åˆ·æ–°ï¼šè°ƒç”¨ `POST /api/v1/positions/refresh`ï¼ˆä¸ä¼ bodyæˆ–ä¼ ç©ºï¼‰
   - å•æ ‡çš„åˆ·æ–°ï¼šbodyä¼  `{"symbols": ["AAPL"]}`
   - Queryå‚æ•°ï¼š`force?: bool` ï¼ˆæ˜¯å¦å¼ºåˆ¶åˆ·æ–°ï¼‰
   - åˆ·æ–°æˆåŠŸåå†æ¬¡è°ƒç”¨ `GET /api/v1/positions/assessment` è·å–æ›´æ–°åçš„å¿«ç…§

3. **ç©ºæ€ä¸é™çº§å¤„ç†**ï¼š
   - `trend_snapshot == null`ï¼šæ˜¾ç¤º"å°šæœªç”Ÿæˆä»Šæ—¥å¿«ç…§"ï¼Œæä¾›"åˆ·æ–°è¯„ä¼°"æŒ‰é’®
   - `ai_summary` ä¸ºç©ºï¼šå±•ç¤º `trend_description` + æŒ‡æ ‡çŠ¶æ€ï¼ˆRSI/MACDï¼‰+ "æ–‡æ¡ˆå¾…ç”Ÿæˆ/å·²é™çº§"
   - æ— æŒä»“ï¼šæ˜¾ç¤º"æš‚æ— æŒä»“æ•°æ®"

4. **é”™è¯¯å¤„ç†**ï¼š
   - ç½‘ç»œé”™è¯¯ï¼šæ˜¾ç¤º"ğŸŒ ç½‘ç»œè¿æ¥å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œæˆ–åç«¯æœåŠ¡çŠ¶æ€"
   - è¯·æ±‚è¶…æ—¶ï¼šæ˜¾ç¤º"â±ï¸ è¯·æ±‚è¶…æ—¶ï¼Œè¯·ç¨åå†è¯•ï¼"
   - OpenAIå¤±è´¥ï¼šå¿«ç…§é™çº§ä¸ºè§„åˆ™æ‘˜è¦ï¼ˆä¸é˜»æ–­é¡µé¢æ¸²æŸ“ï¼‰

#### 2.3.3 å®è§‚é£é™©é¡µé¢ (MacroRiskPage.vue)

**é¡µé¢åŠŸèƒ½**ï¼š
- å±•ç¤ºäº”ç»´å®è§‚é£é™©åˆ†æ
- è´§å¸æ”¿ç­–ã€åœ°ç¼˜æ”¿æ²»ã€è¡Œä¸šæ³¡æ²«ã€ç»æµå‘¨æœŸã€å¸‚åœºæƒ…ç»ª
- ç»¼åˆé£é™©ç­‰çº§è¯„ä¼°
- å…³é”®æŒ‡æ ‡ç›‘æ§

**é¡µé¢å¸ƒå±€**ï¼š
```
MacroRiskPage
â”œâ”€â”€ Header (æ ‡é¢˜ + åˆ·æ–°æŒ‰é’®)
â”œâ”€â”€ MacroRiskDashboard (äº”ç»´é£é™©ä»ªè¡¨ç›˜)
â”‚   â”œâ”€â”€ ç»¼åˆé£é™©è¯„åˆ†
â”‚   â”œâ”€â”€ è´§å¸æ”¿ç­–ç»´åº¦
â”‚   â”œâ”€â”€ åœ°ç¼˜æ”¿æ²»ç»´åº¦
â”‚   â”œâ”€â”€ è¡Œä¸šæ³¡æ²«ç»´åº¦
â”‚   â”œâ”€â”€ ç»æµå‘¨æœŸç»´åº¦
â”‚   â””â”€â”€ å¸‚åœºæƒ…ç»ªç»´åº¦
â””â”€â”€ MacroRiskGuideline (å®è§‚é£é™©è¯´æ˜)
```

**æ ¸å¿ƒæ•°æ®ç»“æ„**ï¼š
```typescript
interface MacroRiskOverview {
  overall_risk: {
    score: number;        // 0-100 (è¶Šé«˜è¶Šå®‰å…¨)
    level: string;        // LOW/MEDIUM/HIGH/CRITICAL
    summary: string;      // AIæ€»ç»“
  };
  dimensions: {
    monetary_policy: RiskDimension;
    geopolitical: RiskDimension;
    sector_bubble: RiskDimension;
    economic_cycle: RiskDimension;
    market_sentiment: RiskDimension;
  };
}
```

**äº¤äº’åŠŸèƒ½**ï¼š
- åˆ·æ–°æŒ‰é’®ï¼šè°ƒç”¨ `/api/v1/macro/refresh` æ›´æ–°å®è§‚æ•°æ®
- æ•°æ®åŠ è½½ï¼šæ˜¾ç¤º"æ­£åœ¨åŠ è½½å®è§‚é£é™©æ•°æ®..."æç¤º
- é”™è¯¯å¤„ç†ï¼šè¶…æ—¶æ˜¾ç¤º"â±ï¸ åˆ·æ–°è¯·æ±‚è¶…æ—¶ï¼Œè¯·ç¨åå†è¯•ï¼"

#### 2.3.4 æ½œåœ¨æœºä¼šé¡µé¢ (OpportunitiesPage.vue)

**é¡µé¢å®šä½**ï¼š
- æŠŠâ€œä»æŒä»“é‡Œæ‰¾æœºä¼šâ€æ‰©å±•ä¸ºâ€œä»è‚¡ç¥¨æ± é‡Œæ‰¾æœºä¼šâ€ï¼Œé¢å‘æœªæ¥å»ºä»“/åŠ ä»“å†³ç­–
- æ ¸å¿ƒäº¤ä»˜ï¼šå±•ç¤ºæœ€æ–°ä¸€æ¬¡æ‰«æç»“æœï¼ˆTop 1-3ï¼‰ï¼Œå¹¶æ”¯æŒæ‰‹åŠ¨è§¦å‘æ‰«æä¸å†å²å›æº¯

**æ ¸å¿ƒæ¥å£ï¼ˆä¸åç«¯å®ç°ä¿æŒä¸€è‡´ï¼‰**ï¼š
- è·å–æœ€æ–°ï¼š`GET /api/v1/opportunities/latest?universe_name=US_LARGE_MID_TECH`
- æ‰‹åŠ¨æ‰«æï¼š`POST /api/v1/opportunities/scan`ï¼ˆbodyï¼š`universe_name/min_score/max_results/force_refresh`ï¼‰
- å†å²åˆ—è¡¨ï¼š`GET /api/v1/opportunities/runs?limit=20&universe_name=...`
- å•æ¬¡è¯¦æƒ…ï¼š`GET /api/v1/opportunities/runs/{run_id}`

**é¡µé¢å¸ƒå±€**ï¼š
```
OpportunitiesPage
â”œâ”€â”€ Header (æ ‡é¢˜ + æ‰«ææŒ‰é’® + å‚æ•°æ§ä»¶)
â”œâ”€â”€ StatusBar (æœ€æ–°æ‰«ææ—¶é—´ + å®è§‚é£é™©å¾½ç«  + ä»»åŠ¡æ—¶é—´æç¤º)
â”œâ”€â”€ OpportunityTopPicks (Top 1-3 æ¨èå¡ç‰‡)
â”‚   â”œâ”€â”€ SymbolPill + ä»·æ ¼/æ¶¨è·Œï¼ˆå¯é€‰ï¼‰
â”‚   â”œâ”€â”€ ä¸‰ç»´è¯„åˆ†æ¡ (T/F/S) + ç»¼åˆåˆ†
â”‚   â”œâ”€â”€ æ¨èåŠ¨ä½œ (BUY/STRONG_BUY)
â”‚   â””â”€â”€ å…³é”®ç†ç”± (reason)
â”œâ”€â”€ RunHistoryPanel (æœ€è¿‘ N æ¬¡æ‰«æ)
â”‚   â”œâ”€â”€ RunsTable (run_key/as_of/qualified/elapsed)
â”‚   â””â”€â”€ RunDetailDrawer (ç‚¹å¼€æŸ¥çœ‹ items ä¸å®è§‚å¿«ç…§)
â””â”€â”€ OpportunitiesGuideline (æœºä¼šæ¨¡å—è¯´æ˜)
```

**äº¤äº’ä¸çŠ¶æ€è®¾è®¡**ï¼ˆä¸å·²æœ‰é¡µé¢é£æ ¼ä¸€è‡´ï¼šæŒ‰é’® + åŠ è½½æ€ + å‹å¥½é”™è¯¯ï¼‰ï¼š

1) **æ‰«æå‚æ•°åŒºï¼ˆHeader å³ä¾§ï¼‰**
- `universe_name`ï¼šä¸‹æ‹‰ï¼ˆé»˜è®¤ `US_LARGE_MID_TECH`ï¼‰
- `min_score`ï¼šæ•°å­—è¾“å…¥ï¼ˆé»˜è®¤ 75ï¼ŒèŒƒå›´ 0-100ï¼‰
- `max_results`ï¼šæ•°å­—è¾“å…¥ï¼ˆé»˜è®¤ 3ï¼ŒèŒƒå›´ 1-10ï¼‰
- `force_refresh`ï¼šå¼€å…³ï¼ˆé»˜è®¤ falseï¼‰
  - æ–‡æ¡ˆï¼š"å¼ºåˆ¶åˆ·æ–°ï¼ˆå¯èƒ½è§¦å‘é™æµï¼Œè€—æ—¶æ›´é•¿ï¼‰"
  - äº¤äº’ï¼šå¼€å¯åç»™å‡ºé»„è‰²æç¤ºï¼ˆWarning Bannerï¼‰

2) **æ‰‹åŠ¨æ‰«ææŒ‰é’®ï¼ˆä¸»è¦ CTAï¼‰**
- ç‚¹å‡»åè°ƒç”¨ `POST /api/v1/opportunities/scan`
- åŠ è½½æ€ï¼šæŒ‰é’®è¿›å…¥ loadingï¼Œä¸»åŒºæ˜¾ç¤ºâ€œæ­£åœ¨æ‰«æï¼ˆå¯èƒ½éœ€è¦ 30-90 ç§’ï¼‰â€¦â€
- æˆåŠŸæ€ï¼šç«‹å³æ¸²æŸ“ run ä¸ items
- å¹‚ç­‰æç¤ºï¼šè‹¥åç«¯è¿”å› `notes.idempotent=true`ï¼Œåœ¨é¡µé¢è§’è½æç¤ºï¼š
  - â€œæœ¬æ¬¡è¯·æ±‚å‘½ä¸­å¹‚ç­‰ç¼“å­˜ï¼Œè¿”å›ä»Šæ—¥å·²ç”Ÿæˆç»“æœâ€

3) **å®è§‚é£é™©èåˆçš„ UI è¡¨è¾¾ï¼ˆå…³é”®è¦æ±‚ï¼‰**
- åœ¨ `StatusBar` æ˜¾ç¤ºå®è§‚é£é™©å¾½ç« ï¼ˆä¸å®è§‚é¡µé£æ ¼ä¸€è‡´ï¼‰ï¼š
  - `LOW/MEDIUM/HIGH/EXTREME` + `overall_score`
- å½“ `risk_level` ä¸º `HIGH/EXTREME` æ—¶ï¼š
  - æ˜¾ç¤ºçº¢/æ©™è‰²æç¤ºæ¡ï¼š
    - â€œå®è§‚é£é™©åé«˜ï¼Œæœ¬æ¬¡æœºä¼šç­›é€‰é˜ˆå€¼è‡ªåŠ¨æé«˜åˆ° 80â€
  - è‹¥ `notes.macro_adjustment` å­˜åœ¨ï¼Œå¯åœ¨ hover/å±•å¼€ä¸­å±•ç¤º before/after ç»†èŠ‚

4) **åŠ¨æ€è‚¡ç¥¨æ± çš„è§£é‡Šä¸é€æ˜åº¦**
- åœ¨ `OpportunitiesGuideline` ä¸­è¯´æ˜ï¼š
  - è‚¡ç¥¨æ± ä¸ºåŠ¨æ€ç”Ÿæˆï¼šä»å€™é€‰é›†åˆä¸­æŒ‰ **å¸‚å€¼ï¼ˆä¸­å¤§å‹ï¼‰+ è¡Œä¸šï¼ˆç§‘æŠ€/ç§‘æŠ€ç›¸å…³ï¼‰**ç­›é€‰
  - è‹¥å‘ç”Ÿæ•°æ®æºé™æµï¼Œç³»ç»Ÿå¯èƒ½ä½¿ç”¨â€œç§‘æŠ€è‚¡å…œåº•æ¸…å•â€ä¿è¯æ‰«æå¯ç”¨
- è‹¥åç«¯åœ¨ `notes.universe.fallback_used=true`ï¼ˆåç»­å‰ç«¯å¯ç›´æ¥å±•ç¤ºè¯¥å­—æ®µï¼‰ï¼š
  - UI æ˜¾ç¤ºæç¤ºï¼š"æ•°æ®æºé™æµï¼Œå·²ä½¿ç”¨å…œåº•è‚¡ç¥¨æ± ï¼ˆç»“æœå¯èƒ½åä¿å®ˆï¼‰"

5) **å†å²å›æº¯ï¼ˆRuns åˆ—è¡¨ + è¯¦æƒ…æŠ½å±‰ï¼‰**
- RunsTable åˆ—ï¼š
  - æ—¶é—´ï¼ˆas_ofï¼‰ã€qualified/totalã€elapsed_msã€macro risk badge
  - è¡Œä¸ºï¼šç‚¹å‡»ä¸€è¡Œæ‰“å¼€ Drawerï¼Œå±•ç¤º items è¯¦æƒ…
- Drawer ä¸­ï¼š
  - â€œå®è§‚å¿«ç…§â€å°å¡ç‰‡ï¼ˆrisk_level/score/summaryï¼‰
  - items åˆ—è¡¨ï¼ˆTop 1-3 æˆ–ç©ºï¼‰

**ç©ºçŠ¶æ€ä¸å¼‚å¸¸çŠ¶æ€**ï¼š
- æ— æœ€æ–°æ•°æ®ï¼šæ˜¾ç¤ºç©ºæ€æ’ç”»/å›¾æ ‡ + â€œç‚¹å‡»â€˜ç«‹å³æ‰«æâ€™ç”Ÿæˆä»Šæ—¥æœºä¼šâ€
- é™æµ/ç½‘ç»œé”™è¯¯ï¼šç»Ÿä¸€ç”¨ä¸­æ–‡æç¤ºï¼š
  - â€œğŸŒ ç½‘ç»œè¿æ¥å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œæˆ–åç«¯æœåŠ¡çŠ¶æ€â€
  - â€œâ±ï¸ æ‰«æè¶…æ—¶ï¼Œè¯·ç¨åå†è¯•ï¼ˆå»ºè®®å…³é—­å¼ºåˆ¶åˆ·æ–°ï¼‰â€

**æ¨èå¡ç‰‡è§†è§‰è§„èŒƒï¼ˆä¿æŒæ·±è‰²ä¸“ä¸šäº¤æ˜“é£æ ¼ï¼‰**ï¼š
- å¡ç‰‡å·¦ä¸Šï¼šSymbol + å°æ ‡ç­¾ï¼ˆUniverseï¼‰
- å³ä¸Šï¼šç»¼åˆåˆ†åœ†ç¯æˆ–å¾½ç« ï¼ˆ0-100ï¼‰
- ä¸­é—´ï¼šä¸‰ç»´è¯„åˆ†æ¡ï¼ˆé¢œè‰²ä»çº¢â†’é»„â†’ç»¿ï¼‰
- åº•éƒ¨ï¼šreasonï¼ˆæœ€å¤š 2 è¡Œï¼Œè¶…å‡ºçœç•¥ï¼Œç‚¹å‡»å±•å¼€ï¼‰

### 2.4 é¡µé¢çº§è¯´æ˜æŒ‡å—è®¾è®¡

**è®¾è®¡ç†å¿µ**ï¼šå°†è¯„åˆ†æ ‡å‡†å’ŒæŒ‡æ ‡è¯´æ˜ä»å…¨å±€ä¾§è¾¹æ ç§»è‡³å„é¡µé¢åº•éƒ¨ï¼Œå®ç°ä¸Šä¸‹æ–‡ç›¸å…³çš„å¸®åŠ©ä¿¡æ¯ã€‚

#### 2.4.1 è¡Œä¸ºè¯„åˆ†è¯´æ˜ (BehaviorGuideline.vue)
**å†…å®¹æ¨¡å—**ï¼š
- è¡Œä¸ºè¯„åˆ† (0-100) åˆ†çº§æ ‡å‡† (T1-T4)
- è‡è¥ç‹—è‹Ÿè¯„åˆ†è¯´æ˜ï¼ˆè¿½æ¶¨æ€è·Œè¡Œä¸ºï¼‰
- è¿‡åº¦äº¤æ˜“è¯„åˆ†è¯´æ˜ï¼ˆäº¤æ˜“é¢‘ç‡æ§åˆ¶ï¼‰
- æŠ¥å¤æ€§äº¤æ˜“è¯„åˆ†è¯´æ˜ï¼ˆæƒ…ç»ªåŒ–äº¤æ˜“ï¼‰
- Greeks æŒ‡æ ‡è¯´æ˜ï¼ˆDeltaã€Gammaã€Thetaã€Vegaï¼‰
- æ“ä½œå»ºè®®ï¼ˆä¸åŒåˆ†æ•°æ®µçš„åº”å¯¹ç­–ç•¥ï¼‰

**å¸ƒå±€æ ·å¼**ï¼š
- æ¨ªå‘ç½‘æ ¼å¸ƒå±€ (Grid Layout)
- å“åº”å¼è®¾è®¡ï¼šè‡ªåŠ¨é€‚é…ä¸åŒå±å¹•å®½åº¦
- å¡ç‰‡å¼å±•ç¤ºï¼šæ¯ä¸ªæ¨¡å—ç‹¬ç«‹å¡ç‰‡ï¼Œæ˜“äºé˜…è¯»
- é¢œè‰²ç¼–ç ï¼šä¼˜ç§€(ç»¿è‰²)ã€è‰¯å¥½(æµ…ç»¿)ã€è­¦æƒ•(æ©™è‰²)ã€å±é™©(çº¢è‰²)

#### 2.4.2 æŒä»“è¯„ä¼°è¯´æ˜ (PositionsGuideline.vue)
**å†…å®¹æ¨¡å—**ï¼š
- ç»¼åˆè¯„åˆ†è¯´æ˜ï¼ˆæŠ€æœ¯+åŸºæœ¬é¢+æƒ…ç»ªåŠ æƒï¼‰
- æ—¥çº¿è¶‹åŠ¿å¿«ç…§è¯´æ˜ï¼ˆWall Streetäº¤æ˜“å‘˜è§†è§’ï¼‰
  - è¶‹åŠ¿æ–¹å‘ï¼šBULLISHï¼ˆçœ‹æ¶¨ï¼‰/BEARISHï¼ˆçœ‹è·Œï¼‰/SIDEWAYSï¼ˆæ¨ªç›˜ï¼‰
  - è¶‹åŠ¿å¼ºåº¦ï¼š0-100ï¼ˆç®—æ³•å¼ºåº¦æ‰“åˆ†ï¼Œä¸æ˜¯ç½®ä¿¡åº¦ï¼‰
  - å…³é”®ä»·ä½ï¼šæ”¯æ’‘ä½/é˜»åŠ›ä½åŠå…¶æ„ä¹‰
  - é‡èƒ½åˆ†æï¼švolume_ratio > 1 æ”¾é‡ï¼Œ< 1 ç¼©é‡
  - AIæ‘˜è¦ï¼šOpenAIç”Ÿæˆçš„äº¤æ˜“å‘˜è§£è¯»ï¼ˆå¤±è´¥é™çº§ä¸ºè§„åˆ™æ‘˜è¦ï¼‰
- æŠ€æœ¯é¢è¯„åˆ†è¯¦è§£ï¼ˆè¶‹åŠ¿ã€RSIã€MACDã€å¸ƒæ—å¸¦ç­‰ï¼‰
  - RSIçŠ¶æ€ï¼šOVERSOLDï¼ˆè¶…å–ï¼‰/NEUTRALï¼ˆä¸­æ€§ï¼‰/OVERBOUGHTï¼ˆè¶…ä¹°ï¼‰
  - MACDçŠ¶æ€ï¼šBULLISH_CROSSOVERï¼ˆé‡‘å‰ï¼‰/BEARISH_CROSSOVERï¼ˆæ­»å‰ï¼‰
  - å¸ƒæ—å¸¦ä½ç½®ï¼šå½“å‰ä»·æ ¼åœ¨å¸ƒæ—å¸¦çš„ç›¸å¯¹ä½ç½®
- åŸºæœ¬é¢è¯„åˆ†è¯¦è§£ï¼ˆä¼°å€¼ã€ç›ˆåˆ©èƒ½åŠ›ã€æˆé•¿æ€§ã€è´¢åŠ¡å¥åº·ï¼‰
- æƒ…ç»ªé¢è¯„åˆ†è¯¦è§£ï¼ˆåˆ†æå¸ˆè¯„çº§ã€æœºæ„æŒä»“ã€æœŸæƒæ•°æ®ï¼‰
- æ“ä½œå»ºè®®è¯´æ˜ï¼ˆSTRONG_BUY/BUY/HOLD/REDUCE/SELLï¼‰
- é£é™©ç­‰çº§è¯´æ˜ï¼ˆLOW/MEDIUM/HIGH/EXTREMEï¼‰
- **é‡è¦æç¤º**ï¼š
  - å®è§‚é£é™©ä¸æ—¥çº¿è¶‹åŠ¿ç‹¬ç«‹åˆ†æï¼Œä¸æ··åˆä¸ºä¸€ä¸ªä¿¡å·æº
  - è¶‹åŠ¿å¿«ç…§ä¸ºæŒä¹…åŒ–ç¼“å­˜ï¼Œæ¯æ—¥æ¯æ ‡çš„åªä¿ç•™æœ€æ–°å¿«ç…§
  - å¿«ç…§å¯èƒ½ä¸ºç©ºï¼Œéœ€æ‰‹åŠ¨è§¦å‘åˆ·æ–°

**å¸ƒå±€ç‰¹ç‚¹**ï¼š
- å¤šåˆ—ç½‘æ ¼å±•ç¤ºï¼šå……åˆ†åˆ©ç”¨é¡µé¢å®½åº¦
- è¯„åˆ†èŒƒå›´æ ‡æ³¨ï¼šä½¿ç”¨å½©è‰²æ ‡ç­¾æ ‡æ³¨åˆ†æ•°åŒºé—´
- ç¤ºä¾‹è¯´æ˜ï¼šæ¯ä¸ªç»´åº¦é…æœ‰å…¸å‹æŒ‡æ ‡è¯´æ˜
- æ³¨æ„äº‹é¡¹ï¼šåº•éƒ¨é†’ç›®æç¤ºé£é™©è­¦å‘Š

#### 2.4.3 å®è§‚é£é™©è¯´æ˜ (MacroRiskGuideline.vue)
**å†…å®¹æ¨¡å—**ï¼š
- äº”ç»´é£é™©æ¨¡å‹æ€»è§ˆ
- æ”¿æ²»é£é™©è¯¦è§£ï¼ˆæ”¿ç­–å˜åŒ–ã€åœ°ç¼˜å†²çªã€æ³•è§„ç›‘ç®¡ï¼‰
- ç»æµé£é™©è¯¦è§£ï¼ˆç»æµå¢é•¿ã€é€šèƒ€å‹åŠ›ã€åˆ©ç‡ç¯å¢ƒï¼‰
- å¸‚åœºé£é™©è¯¦è§£ï¼ˆæ³¢åŠ¨ç‡ã€ä¼°å€¼æ°´å¹³ã€æµåŠ¨æ€§ï¼‰
- é‡‘èé£é™©è¯¦è§£ï¼ˆä¿¡ç”¨é£é™©ã€é“¶è¡Œå¥åº·ã€æ æ†æ°´å¹³ï¼‰
- æŠ€æœ¯é£é™©è¯¦è§£ï¼ˆæŠ€æœ¯é¢ è¦†ã€åˆ›æ–°é£é™©ã€ç½‘ç»œå®‰å…¨ï¼‰
- é£é™©åº”å¯¹ç­–ç•¥ï¼ˆé˜²å¾¡ã€å¯¹å†²ã€åˆ†æ•£ã€æ—¶æœºï¼‰
- å…³é”®ç›‘æµ‹æŒ‡æ ‡ï¼ˆVIXã€ç¾å€ºæ”¶ç›Šç‡æ›²çº¿ã€PMIç­‰ï¼‰

**å¸ƒå±€ç‰¹ç‚¹**ï¼š
- åˆ†å±‚å±•ç¤ºï¼šæ¯ä¸ªé£é™©ç»´åº¦ç‹¬ç«‹å±•å¼€
- é£é™©åŒºé—´ï¼šç”¨é¢œè‰²åŒºåˆ†ä½/ä¸­/é«˜é£é™©
- ç­–ç•¥ç½‘æ ¼ï¼šå››å®«æ ¼å±•ç¤ºåº”å¯¹ç­–ç•¥
- æŒ‡æ ‡ç›‘æ§ï¼šå…³é”®æŒ‡æ ‡é˜ˆå€¼ä¸€è§ˆè¡¨

### 2.5 é”™è¯¯å¤„ç†ä¸ç”¨æˆ·ä½“éªŒ

#### 2.5.1 å‹å¥½é”™è¯¯æç¤º
**å®ç°é€»è¾‘**ï¼š
```typescript
try {
  data = await fetchData();
} catch (e: any) {
  if (e.code === 'ECONNABORTED' || e.message?.includes('timeout')) {
    errorMsg.value = 'â±ï¸ è¯·æ±‚è¶…æ—¶ï¼Œè¯·ç¨åå†è¯•ï¼';
  } else if (e.code === 'ERR_NETWORK' || e.message?.includes('Network Error')) {
    errorMsg.value = 'ğŸŒ ç½‘ç»œè¿æ¥å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œæˆ–åç«¯æœåŠ¡çŠ¶æ€';
  } else {
    errorMsg.value = 'âŒ è·å–æ•°æ®å¤±è´¥';
  }
}
```

**é”™è¯¯ç±»å‹è¦†ç›–**ï¼š
- â±ï¸ **è¯·æ±‚è¶…æ—¶**ï¼šAPI è°ƒç”¨è¶…è¿‡ 30 ç§’
- ğŸŒ **ç½‘ç»œé”™è¯¯**ï¼šæ— æ³•è¿æ¥åç«¯æœåŠ¡
- âŒ **å…¶ä»–é”™è¯¯**ï¼šæœªçŸ¥é”™è¯¯çš„é€šç”¨æç¤º

**åº”ç”¨åœºæ™¯**ï¼š
- æ‰€æœ‰é¡µé¢çš„æ•°æ®åŠ è½½
- åˆ·æ–°æŒ‰é’®ç‚¹å‡»
- é‡æ–°è®¡ç®—æ“ä½œ

#### 2.5.2 åŠ è½½çŠ¶æ€è®¾è®¡
```vue
<p v-if="loading" class="loading-message">
  æ­£åœ¨åŠ è½½æŒä»“æ•°æ®...
</p>
<p v-else-if="errorMsg" class="error-message">
  {{ errorMsg }}
</p>
<div v-else-if="data">
  <!-- æ­£å¸¸æ•°æ®å±•ç¤º -->
</div>
<p v-else class="info-message">
  æš‚æ— æ•°æ®
</p>
```

**çŠ¶æ€ä¼˜å…ˆçº§**ï¼š
1. Loadingï¼ˆåŠ è½½ä¸­ï¼‰
2. Errorï¼ˆé”™è¯¯ï¼‰
3. Dataï¼ˆæœ‰æ•°æ®ï¼‰
4. Emptyï¼ˆæ— æ•°æ®ï¼‰

### 2.6 æ ·å¼ç³»ç»Ÿ

#### 2.6.1 é…è‰²æ–¹æ¡ˆ
```css
/* ä¸»é¢˜è‰² */
--primary: #38bdf8;        /* å¤©è“è‰² - å“ç‰Œè‰² */
--success: #22c55e;        /* ç»¿è‰² - æˆåŠŸ/ä¸Šæ¶¨ */
--warning: #f59e0b;        /* æ©™è‰² - è­¦å‘Š */
--danger: #ef4444;         /* çº¢è‰² - å±é™©/ä¸‹è·Œ */

/* èƒŒæ™¯è‰² */
--bg-primary: #020617;     /* æ·±è“é»‘ */
--bg-secondary: #0f172a;   /* æ¬¡çº§èƒŒæ™¯ */
--bg-card: rgba(15, 23, 42, 0.85);  /* å¡ç‰‡èƒŒæ™¯ */

/* æ–‡æœ¬è‰² */
--text-primary: #e5e7eb;   /* ä¸»æ–‡æœ¬ */
--text-secondary: #9ca3af; /* æ¬¡è¦æ–‡æœ¬ */
--text-muted: #6b7280;     /* å¼±åŒ–æ–‡æœ¬ */

/* è¾¹æ¡†è‰² */
--border-primary: rgba(56, 189, 248, 0.4);
--border-secondary: rgba(55, 65, 81, 0.8);
```

#### 2.6.2 å“åº”å¼è®¾è®¡
```css
/* ç§»åŠ¨ç«¯é€‚é… */
@media (max-width: 900px) {
  .layout {
    grid-template-columns: minmax(0, 1fr);  /* å•åˆ—å¸ƒå±€ */
  }
  .sidebar {
    border-right: none;
    border-bottom: 1px solid rgba(30, 64, 175, 0.6);
  }
}
```

#### 2.6.3 åŠ¨ç”»æ•ˆæœ
```css
/* è·¯ç”±åˆ‡æ¢åŠ¨ç”» */
.fade-enter-active,
.fade-leave-active {
  transition: opacity 0.2s ease;
}
.fade-enter-from,
.fade-leave-to {
  opacity: 0;
}

/* æŒ‰é’®æ‚¬åœæ•ˆæœ */
.nav-button:hover {
  transform: translateY(-1px);
  box-shadow: 0 0 18px rgba(34, 197, 94, 0.8);
}
```

---

## ä¸‰ã€æŒä»“è¯„ä¼°æ¨¡å—è®¾è®¡

### 3.1 åŠŸèƒ½å®šä¹‰

#### 3.1.0 æ—¥çº¿è¶‹åŠ¿å¿«ç…§ (Trend Snapshot)
**è®¾è®¡ç›®æ ‡**ï¼šä¸ºæ¯ä¸ªæŒä»“æ ‡çš„ç”Ÿæˆ Wall Street äº¤æ˜“å‘˜è§†è§’çš„æ—¥çº¿èµ°åŠ¿åˆ†æå¿«ç…§

**æ ¸å¿ƒç‰¹æ€§**ï¼š
- **æŒä¹…åŒ–ç¼“å­˜**ï¼šå†™å…¥ `position_trend_snapshots` è¡¨ï¼Œæ¯æ—¥æ¯æ ‡çš„åªä¿ç•™æœ€æ–°å¿«ç…§
- **æŒ‰éœ€ç”Ÿæˆ**ï¼šä¸æ˜¯æ¯æ¬¡è¿›å…¥é¡µé¢éƒ½è°ƒç”¨ AIï¼Œé€šè¿‡åˆ·æ–°æŒ‰é’®æ‰‹åŠ¨è§¦å‘
- **é™çº§æœºåˆ¶**ï¼šOpenAI å¤±è´¥æ—¶é™çº§ä¸ºè§„åˆ™æ‘˜è¦ï¼Œä¸é˜»æ–­é¡µé¢æ¸²æŸ“
- **ç‹¬ç«‹åˆ†æ**ï¼šä¸å®è§‚é£é™©æ¨¡å—ç‹¬ç«‹ï¼Œä¸æ··åˆä¿¡å·

**APIæ¥å£**ï¼š
- è·å–è¯„ä¼°ï¼ˆå«å¿«ç…§ï¼‰ï¼š`GET /api/v1/positions/assessment`
- åˆ·æ–°å¿«ç…§ï¼š`POST /api/v1/positions/refresh?force=false`
  - Body: `{"symbols": ["AAPL"]}` æˆ–ä¸ä¼ ï¼ˆåˆ·æ–°å…¨éƒ¨ï¼‰
- æŠ€æœ¯æ˜ç»†ï¼š`GET /api/v1/positions/{symbol}/technical?timeframe=1D&force_refresh=false`

**è¾“å‡ºå†…å®¹**ï¼š
```typescript
interface TrendSnapshot {
  // è¶‹åŠ¿åˆ¤æ–­
  trend_direction?: 'BULLISH' | 'BEARISH' | 'SIDEWAYS';  // è¶‹åŠ¿æ–¹å‘
  trend_strength?: number;          // è¶‹åŠ¿å¼ºåº¦ 0-100ï¼ˆéç½®ä¿¡åº¦ï¼‰
  trend_description?: string;       // è¶‹åŠ¿æ–‡å­—æè¿°
  
  // æŠ€æœ¯æŒ‡æ ‡çŠ¶æ€
  rsi_value?: number;               // RSIå€¼ 0-100
  rsi_status?: 'OVERSOLD' | 'NEUTRAL' | 'OVERBOUGHT';
  macd_status?: string;             // MACDçŠ¶æ€ï¼ˆé‡‘å‰/æ­»å‰ç­‰ï¼‰
  macd_signal?: number;             // MACDä¿¡å·å€¼
  bollinger_position?: string;      // ä»·æ ¼åœ¨å¸ƒæ—å¸¦çš„ä½ç½®
  volume_ratio?: number;            // å½“å‰é‡/20æ—¥å‡é‡
  
  // å…³é”®ä»·ä½
  support_levels: number[];         // æ”¯æ’‘ä½æ•°ç»„
  resistance_levels: number[];      // é˜»åŠ›ä½æ•°ç»„
  
  // AIç”Ÿæˆå†…å®¹
  ai_summary?: string;              // Wall Streetäº¤æ˜“å‘˜é£æ ¼è§£è¯»
  timestamp: string;                // å¿«ç…§ç”Ÿæˆæ—¶é—´
}
```

**UIå±•ç¤ºåŸåˆ™**ï¼š
- **è¶‹åŠ¿æ–¹å‘**ï¼šä½¿ç”¨å›¾æ ‡+é¢œè‰²ï¼ˆç»¿/çº¢/é»„ï¼‰ç›´è§‚å±•ç¤º
- **è¶‹åŠ¿å¼ºåº¦**ï¼šæ¡å½¢å›¾æˆ–åˆ»åº¦æ˜¾ç¤ºï¼Œæ ‡æ³¨"è¶‹åŠ¿å¼ºåº¦"è€Œé"ç½®ä¿¡åº¦"
- **å…³é”®ä½**ï¼šåˆ—è¡¨å±•ç¤ºå‰2-3ä¸ªæ”¯æ’‘/é˜»åŠ›ä½ï¼Œå…¶ä½™æŠ˜å 
- **é‡èƒ½**ï¼š`volume_ratio` > 1 æ ‡ç»¿ï¼ˆæ”¾é‡ï¼‰ï¼Œ< 1 æ ‡æ©™ï¼ˆç¼©é‡ï¼‰
- **AIæ‘˜è¦**ï¼šä½œä¸º"äº¤æ˜“å‘˜æ‘˜è¦"å±•ç¤ºï¼Œé™çº§æ—¶æ˜¾ç¤º"å·²ä½¿ç”¨è§„åˆ™æ‘˜è¦"

**ç©ºæ€ä¸åˆ·æ–°**ï¼š
- `trend_snapshot == null`ï¼šæ˜¾ç¤º"å°šæœªç”Ÿæˆä»Šæ—¥å¿«ç…§" + åˆ·æ–°æŒ‰é’®
- åˆ·æ–°å…¥å£ï¼šå…¨éƒ¨åˆ·æ–°æˆ–å•æ ‡çš„åˆ·æ–°
- åˆ·æ–°æµç¨‹ï¼š`POST /api/v1/positions/refresh` â†’ é‡æ–°è·å–è¯„ä¼°æ•°æ®

**å‰ç«¯æ³¨æ„äº‹é¡¹**ï¼š
- ä¸è¦å®ç°"è¶‹åŠ¿ç½®ä¿¡åº¦"å­—æ®µ
- `trend_snapshot` å…è®¸ä¸ºç©ºï¼Œå¿…é¡»åšç©ºæ€å¤„ç†
- å®è§‚é£é™©ä¸æŒä»“è¶‹åŠ¿ä¸è¦åˆå¹¶æˆç»¼åˆä¿¡å·
- ä¸è¦ä¾èµ– `docs/legacy/*` çš„æ—§å¥‘çº¦

#### 3.1.1 æŒä»“æ ‡çš„è¯„åˆ† (Position Scoring)
**ç›®æ ‡**ï¼šä¸ºæ¯ä¸ªæŒä»“æ ‡çš„ç”Ÿæˆç»¼åˆè¯„åˆ† (0-100)

**è¯„åˆ†ç»´åº¦**ï¼š
```
ç»¼åˆè¯„åˆ† = æŠ€æœ¯é¢è¯„åˆ† Ã— 40% + åŸºæœ¬é¢è¯„åˆ† Ã— 40% + æƒ…ç»ªé¢è¯„åˆ† Ã— 20%

æŠ€æœ¯é¢è¯„åˆ† (0-100):
- è¶‹åŠ¿å¼ºåº¦: MAå‡çº¿æ’åˆ—ã€è¶‹åŠ¿çº¿ã€åŠ¨é‡æŒ‡æ ‡
- æ”¯æ’‘/é˜»åŠ›: å½“å‰ä»·æ ¼ä½ç½®ã€å…³é”®ä»·ä½è·ç¦»
- æ³¢åŠ¨ç‡: ATRã€å¸ƒæ—å¸¦å®½åº¦ã€å†å²æ³¢åŠ¨ç‡
- é‡ä»·å…³ç³»: æˆäº¤é‡ç¡®è®¤ã€èµ„é‡‘æµå‘

åŸºæœ¬é¢è¯„åˆ† (0-100):
- ä¼°å€¼æ°´å¹³: PEã€PBã€PSã€PEG vs è¡Œä¸šå‡å€¼
- ç›ˆåˆ©èƒ½åŠ›: ROEã€æ¯›åˆ©ç‡ã€å‡€åˆ©ç‡ã€è¥æ”¶å¢é•¿
- è´¢åŠ¡å¥åº·: èµ„äº§è´Ÿå€ºç‡ã€æµåŠ¨æ¯”ç‡ã€ç°é‡‘æµ
- æˆé•¿æ€§: è¥æ”¶/åˆ©æ¶¦å¢é•¿ç‡ã€å¸‚åœºä»½é¢å˜åŒ–

æƒ…ç»ªé¢è¯„åˆ† (0-100):
- å¸‚åœºæƒ…ç»ª: ç¤¾äº¤åª’ä½“çƒ­åº¦ã€åˆ†æå¸ˆè¯„çº§å˜åŒ–
- èµ„é‡‘æµå‘: ä¸»åŠ›èµ„é‡‘æµå…¥/æµå‡ºã€æœºæ„æŒä»“å˜åŒ–
- æœŸæƒå¸‚åœº: Put/Call Ratioã€éšå«æ³¢åŠ¨ç‡
```

#### 3.1.2 æŠ€æœ¯èµ°åŠ¿åˆ†æ (Technical Analysis)
**è¾“å‡ºå†…å®¹**ï¼š
```json
{
  "symbol": "AAPL",
  "technical_analysis": {
    "trend": {
      "direction": "BULLISH",  // BULLISH/BEARISH/SIDEWAYS
      "strength": 75,           // 0-100
      "description": "Strong uptrend with MA50 > MA200 golden cross"
    },
    "indicators": {
      "rsi": {
        "value": 62.5,
        "status": "NEUTRAL",    // OVERSOLD/NEUTRAL/OVERBOUGHT
        "signal": "HOLD"
      },
      "macd": {
        "value": 2.15,
        "signal_line": 1.89,
        "histogram": 0.26,
        "status": "BULLISH_CROSSOVER"
      },
      "bollinger_bands": {
        "upper": 185.50,
        "middle": 180.00,
        "lower": 174.50,
        "current_price": 182.30,
        "position": "MIDDLE_TO_UPPER",
        "width_percentile": 65  // æ³¢åŠ¨ç‡ç›¸å¯¹ä½ç½®
      }
    },
    "support_resistance": {
      "key_support": [175.00, 170.50, 165.00],
      "key_resistance": [185.00, 190.00, 195.00],
      "current_level": "NEAR_SUPPORT"
    },
    "volume_analysis": {
      "avg_volume_20d": 45000000,
      "current_volume": 52000000,
      "volume_trend": "INCREASING",
      "volume_price_divergence": false
    },
    "chart_patterns": [
      {
        "pattern": "CUP_AND_HANDLE",
        "confidence": 0.78,
        "target_price": 195.00,
        "timeframe": "3M"
      }
    ],
    "ai_summary": "æŠ€æœ¯é¢åå¤šï¼ŒRSIä¸­æ€§åŒºåŸŸï¼ŒMACDé‡‘å‰ç¡®è®¤ï¼Œå»ºè®®å›è°ƒè‡³175æ”¯æ’‘ä½åŠ ä»“"
  }
}
```

#### 3.1.3 åŸºæœ¬é¢åˆ†æ (Fundamental Analysis)
**è¾“å‡ºå†…å®¹**ï¼š
```json
{
  "symbol": "AAPL",
  "fundamental_analysis": {
    "valuation": {
      "pe_ratio": 28.5,
      "pe_percentile": 65,     // å†å²åˆ†ä½æ•°
      "sector_avg_pe": 25.3,
      "peg_ratio": 1.8,
      "pb_ratio": 42.5,
      "ps_ratio": 7.2,
      "valuation_grade": "B",  // A/B/C/D/F
      "comment": "Slightly expensive vs sector, but justified by quality"
    },
    "profitability": {
      "roe": 0.175,
      "roa": 0.265,
      "gross_margin": 0.438,
      "operating_margin": 0.298,
      "net_margin": 0.253,
      "profitability_grade": "A+"
    },
    "growth": {
      "revenue_growth_yoy": 0.082,      // 8.2%
      "revenue_growth_qoq": 0.045,
      "eps_growth_yoy": 0.115,
      "earnings_surprise_last_4q": [0.03, 0.02, 0.05, 0.04],
      "growth_grade": "A"
    },
    "financial_health": {
      "debt_to_equity": 1.98,
      "current_ratio": 1.07,
      "quick_ratio": 0.95,
      "free_cash_flow": 99800000000,    // USD
      "cash_and_equivalents": 61550000000,
      "health_grade": "A"
    },
    "dividends": {
      "dividend_yield": 0.0048,          // 0.48%
      "payout_ratio": 0.15,
      "dividend_growth_5y": 0.065,       // 6.5% CAGR
      "consecutive_years": 12
    },
    "analyst_ratings": {
      "consensus": "BUY",
      "strong_buy": 18,
      "buy": 12,
      "hold": 5,
      "sell": 1,
      "strong_sell": 0,
      "avg_price_target": 195.50,
      "price_target_range": [165.00, 220.00]
    },
    "ai_summary": "ä¼˜è´¨ç§‘æŠ€é¾™å¤´ï¼Œç›ˆåˆ©èƒ½åŠ›å¼ºï¼Œä¼°å€¼åˆç†ï¼Œç°é‡‘æµå¥åº·ï¼Œå»ºè®®é•¿æœŸæŒæœ‰"
  }
}
```

### 3.2 æ•°æ®æºè®¾è®¡

#### 3.2.1 æŠ€æœ¯åˆ†ææ•°æ®æº
```python
# ä¼˜å…ˆçº§æ’åº
1. Tiger API (å·²æœ‰)
   - å®æ—¶è¡Œæƒ…ã€å†å²Kçº¿
   - æˆäº¤é‡æ•°æ®
   
2. yfinance (å…è´¹)
   - æ—¥çº¿/å‘¨çº¿/æœˆçº¿æ•°æ®
   - æŠ€æœ¯æŒ‡æ ‡è®¡ç®—
   
3. Alpha Vantage (å¤‡é€‰)
   - æŠ€æœ¯æŒ‡æ ‡ API
   - åˆ†é’Ÿçº§æ•°æ®
```

#### 3.2.2 åŸºæœ¬é¢æ•°æ®æº
```python
1. Financial Modeling Prep (æ¨è)
   - è´¢åŠ¡æŠ¥è¡¨ API (å…è´¹é¢åº¦500æ¬¡/å¤©)
   - ä¼°å€¼æŒ‡æ ‡ã€è´¢åŠ¡æ¯”ç‡
   - åˆ†æå¸ˆè¯„çº§
   
2. Yahoo Finance API (yfinance)
   - åŸºæœ¬é¢æ•°æ®
   - åˆ†æå¸ˆç›®æ ‡ä»·
   
3. Tiger API
   - å…¬å¸åŸºæœ¬ä¿¡æ¯
   - è´¢æŠ¥æ—¥æœŸ
```

### 3.3 æ•°æ®åº“è®¾è®¡

#### 3.3.1 æŒä»“è¯„åˆ†è¡¨
```sql
CREATE TABLE position_scores (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    account_id TEXT NOT NULL,
    symbol TEXT NOT NULL,
    timestamp DATETIME DEFAULT CURRENT_TIMESTAMP,
    
    -- ç»¼åˆè¯„åˆ†
    overall_score INTEGER,           -- 0-100
    technical_score INTEGER,         -- 0-100
    fundamental_score INTEGER,       -- 0-100
    sentiment_score INTEGER,         -- 0-100
    
    -- æŠ€æœ¯é¢è¯¦æƒ…
    trend_direction TEXT,            -- BULLISH/BEARISH/SIDEWAYS
    trend_strength INTEGER,
    rsi_value REAL,
    rsi_status TEXT,
    macd_signal TEXT,
    
    -- åŸºæœ¬é¢è¯¦æƒ…
    pe_ratio REAL,
    peg_ratio REAL,
    roe REAL,
    revenue_growth_yoy REAL,
    valuation_grade TEXT,
    profitability_grade TEXT,
    
    -- AIæ€»ç»“
    technical_summary TEXT,
    fundamental_summary TEXT,
    recommendation TEXT,             -- BUY/HOLD/SELL
    
    UNIQUE(account_id, symbol, date(timestamp))
);
```

#### 3.3.2 æŠ€æœ¯åˆ†æç¼“å­˜è¡¨
```sql
CREATE TABLE technical_indicators (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    symbol TEXT NOT NULL,
    timestamp DATETIME DEFAULT CURRENT_TIMESTAMP,
    timeframe TEXT,                  -- 1D/1W/1M
    
    -- ä»·æ ¼æ•°æ®
    close_price REAL,
    volume BIGINT,
    
    -- ç§»åŠ¨å¹³å‡çº¿
    ma_5 REAL,
    ma_10 REAL,
    ma_20 REAL,
    ma_50 REAL,
    ma_200 REAL,
    
    -- åŠ¨é‡æŒ‡æ ‡
    rsi_14 REAL,
    macd REAL,
    macd_signal REAL,
    macd_histogram REAL,
    
    -- æ³¢åŠ¨ç‡
    atr_14 REAL,
    bb_upper REAL,
    bb_middle REAL,
    bb_lower REAL,
    
    -- æˆäº¤é‡
    volume_sma_20 BIGINT,
    obv BIGINT,                      -- On-Balance Volume
    
    UNIQUE(symbol, timestamp, timeframe)
);
```

#### 3.3.3 åŸºæœ¬é¢æ•°æ®è¡¨
```sql
CREATE TABLE fundamental_data (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    symbol TEXT NOT NULL,
    fiscal_date DATE NOT NULL,
    data_type TEXT,                  -- QUARTERLY/ANNUAL
    
    -- ä¼°å€¼
    market_cap BIGINT,
    pe_ratio REAL,
    pb_ratio REAL,
    ps_ratio REAL,
    peg_ratio REAL,
    
    -- ç›ˆåˆ©èƒ½åŠ›
    revenue BIGINT,
    net_income BIGINT,
    eps REAL,
    roe REAL,
    roa REAL,
    gross_margin REAL,
    operating_margin REAL,
    net_margin REAL,
    
    -- å¢é•¿
    revenue_growth_yoy REAL,
    eps_growth_yoy REAL,
    
    -- è´¢åŠ¡å¥åº·
    total_assets BIGINT,
    total_debt BIGINT,
    cash_and_equivalents BIGINT,
    free_cash_flow BIGINT,
    debt_to_equity REAL,
    current_ratio REAL,
    
    UNIQUE(symbol, fiscal_date, data_type)
);
```

### 3.4 API è®¾è®¡

#### 3.4.1 è·å–æŒä»“è¯„ä¼°
```http
GET /positions/assessment?window_days=7

Response:
{
  "account_id": "8606682",
  "timestamp": "2025-12-31T10:30:00Z",
  "total_score": 78,
  "positions": [
    {
      "symbol": "AAPL",
      "quantity": 100,
      "avg_cost": 175.50,
      "current_price": 182.30,
      "unrealized_pnl": 680.00,
      "pnl_pct": 0.0387,
      "weight": 0.35,                    // å æ€»ä»“ä½35%
      
      "scores": {
        "overall": 82,
        "technical": 78,
        "fundamental": 88,
        "sentiment": 75
      },
      
      "recommendation": {
        "action": "HOLD",                // BUY/HOLD/REDUCE/SELL
        "confidence": 0.85,
        "reason": "Strong fundamentals, overbought technically",
        "target_weight": 0.30,           // å»ºè®®é™è‡³30%
        "stop_loss": 175.00,
        "take_profit": 195.00
      },
      
      "risk_alerts": [
        {
          "level": "MEDIUM",
          "type": "CONCENTRATION",
          "message": "Position exceeds 30% portfolio weight"
        }
      ]
    }
  ],
  
  "portfolio_summary": {
    "avg_technical_score": 76,
    "avg_fundamental_score": 84,
    "diversification_score": 65,
    "concentration_risk": "MEDIUM",
    "sector_exposure": {
      "Technology": 0.60,
      "Healthcare": 0.25,
      "Consumer": 0.15
    }
  }
}
```

#### 3.4.2 è·å–æŠ€æœ¯åˆ†æ
```http
GET /positions/{symbol}/technical?timeframe=1D

Response: (å¦‚ 2.1.2 æ‰€ç¤º)
```

#### 3.4.3 è·å–åŸºæœ¬é¢åˆ†æ
```http
GET /positions/{symbol}/fundamental

Response: (å¦‚ 2.1.3 æ‰€ç¤º)
```

#### 3.4.4 åˆ·æ–°æŒä»“è¯„ä¼°
```http
POST /positions/refresh
{
  "symbols": ["AAPL", "MSFT"],    // å¯é€‰ï¼Œä¸ä¼ åˆ™åˆ·æ–°å…¨éƒ¨
  "force": false                   // æ˜¯å¦å¼ºåˆ¶é‡æ–°è®¡ç®—
}

Response:
{
  "status": "ok",
  "refreshed_count": 2,
  "cache_hits": 5,
  "calculation_time_ms": 1250
}
```

### 3.5 å‰ç«¯APIæ¥å£æ¸…å•ï¼ˆæŒä»“è¯„ä¼°æ¨¡å—ï¼‰

åŸºäº `FRONTEND_POSITIONS_ASSESSMENT_GUIDE.md` çš„æƒå¨å¥‘çº¦ï¼Œå‰ç«¯éœ€æ¥å…¥ä»¥ä¸‹æ¥å£ï¼š

#### 3.5.1 è·å–æŒä»“è¯„ä¼°ï¼ˆå«è¶‹åŠ¿å¿«ç…§ï¼‰
```http
GET /api/v1/positions/assessment

Response:
{
  "positions": [
    {
      "symbol": "AAPL",
      "quantity": 100,
      "avg_cost": 175.50,
      "current_price": 182.30,
      "market_value": 18230.00,
      "unrealized_pnl": 680.00,
      "unrealized_pnl_percent": 0.0387,
      "overall_score": 82,
      "technical_score": 78,
      "fundamental_score": 88,
      "sentiment_score": 75,
      "risk_level": "MEDIUM",
      "recommendation": "BUY",
      "target_position": 120,
      "stop_loss": 170.00,
      "take_profit": 195.00,
      "trend_snapshot": {
        "symbol": "AAPL",
        "trend_direction": "BULLISH",
        "trend_strength": 75,
        "trend_description": "å¼ºåŠ¿ä¸Šæ¶¨è¶‹åŠ¿",
        "rsi_value": 62.5,
        "rsi_status": "NEUTRAL",
        "macd_status": "BULLISH_CROSSOVER",
        "macd_signal": 2.15,
        "bollinger_position": "MIDDLE_TO_UPPER",
        "volume_ratio": 1.35,
        "support_levels": [175.00, 170.50, 165.00],
        "resistance_levels": [185.00, 190.00, 195.00],
        "ai_summary": "æŠ€æœ¯é¢åå¤šï¼ŒRSIä¸­æ€§åŒºåŸŸï¼ŒMACDé‡‘å‰ç¡®è®¤ï¼Œå»ºè®®å›è°ƒè‡³175æ”¯æ’‘ä½åŠ ä»“",
        "timestamp": "2026-01-06T08:30:00Z"
      }
    }
  ],
  "summary": {
    "total_positions": 5,
    "total_value": 125000.00,
    "total_pnl": 8500.00,
    "avg_score": 76,
    "high_risk_count": 1,
    "buy_recommendation_count": 2
  }
}
```

**å­—æ®µè¯´æ˜**ï¼š
- `trend_snapshot` å¯èƒ½ä¸º `null`ï¼ˆæœªç”Ÿæˆ/æœªåˆ·æ–°/æ— æ•°æ®ï¼‰
- `trend_strength` æ˜¯ç®—æ³•å¼ºåº¦æ‰“åˆ†ï¼ˆ0-100ï¼‰ï¼Œ**ä¸æ˜¯ç½®ä¿¡åº¦**
- `risk_level`: `LOW/MEDIUM/HIGH/EXTREME`
- `recommendation`: `BUY/STRONG_BUY/HOLD/REDUCE/SELL`

#### 3.5.2 åˆ·æ–°è¶‹åŠ¿å¿«ç…§
```http
POST /api/v1/positions/refresh?force=false

Body (å¯é€‰):
{
  "symbols": ["AAPL"]  // ä¸ä¼ è¡¨ç¤ºåˆ·æ–°å…¨éƒ¨æŒä»“
}

Response:
{
  "status": "success",
  "refreshed_symbols": ["AAPL"],
  "timestamp": "2026-01-06T08:30:00Z"
}
```

**è°ƒç”¨æ—¶æœº**ï¼š
- ç”¨æˆ·ç‚¹å‡»"åˆ·æ–°è¯„ä¼°"æŒ‰é’®
- å…¨éƒ¨åˆ·æ–°ï¼šä¸ä¼  body æˆ–ä¼ ç©º
- å•æ ‡çš„åˆ·æ–°ï¼šä¼  `{"symbols": ["AAPL"]}`
- åˆ·æ–°æˆåŠŸåéœ€å†æ¬¡è°ƒç”¨ `GET /api/v1/positions/assessment` è·å–æ›´æ–°åçš„å¿«ç…§

#### 3.5.3 è·å–æŠ€æœ¯åˆ†ææ˜ç»†ï¼ˆå¯é€‰ï¼‰
```http
GET /api/v1/positions/{symbol}/technical?timeframe=1D&force_refresh=false

Response:
{
  "symbol": "AAPL",
  "timeframe": "1D",
  "trend": {
    "direction": "BULLISH",
    "strength": 75,
    "description": "å¼ºåŠ¿ä¸Šæ¶¨è¶‹åŠ¿"
  },
  "indicators": {
    "rsi": {
      "value": 62.5,
      "status": "NEUTRAL",
      "signal": "HOLD"
    },
    "macd": {
      "value": 2.15,
      "signal_line": 1.89,
      "histogram": 0.26,
      "status": "BULLISH_CROSSOVER"
    },
    "bollinger_bands": {
      "upper": 185.50,
      "middle": 180.00,
      "lower": 174.50,
      "current_price": 182.30,
      "position": "MIDDLE_TO_UPPER",
      "width_percentile": 65
    }
  },
  "support_resistance": {
    "key_support": [175.00, 170.50, 165.00],
    "key_resistance": [185.00, 190.00, 195.00],
    "current_level": "NEAR_RESISTANCE"
  },
  "volume_analysis": {
    "avg_volume_20d": 45000000,
    "current_volume": 52000000,
    "volume_trend": "INCREASING",
    "volume_ratio": 1.35
  }
}
```

**ç”¨é€”**ï¼š
- åœ¨æŒä»“è¯¦æƒ…é¡µ/æŠ½å±‰ä¸­å±•ç¤ºæ›´è¯¦ç»†çš„æŠ€æœ¯åˆ†æé¢æ¿
- æ¯”è¶‹åŠ¿å¿«ç…§æ›´"åˆ†æé¢æ¿åŒ–"

#### 3.5.4 è·å–åŸºæœ¬é¢åˆ†æï¼ˆå¯é€‰ï¼‰
```http
GET /api/v1/positions/{symbol}/fundamental

Response:
{
  "symbol": "AAPL",
  "valuation": {
    "pe_ratio": 28.5,
    "peg_ratio": 1.8,
    "pb_ratio": 42.5,
    "valuation_grade": "B"
  },
  "profitability": {
    "roe": 0.175,
    "roa": 0.265,
    "gross_margin": 0.438,
    "profitability_grade": "A+"
  },
  "growth": {
    "revenue_growth_yoy": 0.082,
    "eps_growth_yoy": 0.115,
    "growth_grade": "A"
  },
  "financial_health": {
    "debt_to_equity": 1.98,
    "current_ratio": 1.07,
    "free_cash_flow": 99800000000,
    "health_grade": "A"
  }
}
```

#### 3.5.5 å‰ç«¯æ³¨æ„äº‹é¡¹

**å¿…é¡»éµå®ˆçš„çº¦æŸ**ï¼š
1. **ä¸è¦å®ç°"è¶‹åŠ¿ç½®ä¿¡åº¦"**ï¼šåç«¯æ˜ç¡®ä¸è¿”å›è¯¥å­—æ®µï¼ŒUI ä¹Ÿä¸è¦å‘ˆç°
2. **è¶‹åŠ¿å¿«ç…§å…è®¸ä¸ºç©º**ï¼šå¿…é¡»åšç©ºæ€ä¸åˆ·æ–°å…¥å£
3. **å®è§‚é£é™©ä¸æŒä»“è¶‹åŠ¿ä¸è”åŠ¨**ï¼šä¸è¦åˆå¹¶æˆä¸€ä¸ªç»¼åˆä¿¡å·
4. **ä¸è¦ä¾èµ–æ—§æ–‡æ¡£**ï¼šä»¥ `API.md` å’Œæœ¬æ–‡æ¡£ä¸ºå‡†

**èƒ½åŠ›å¼€å…³å½±å“**ï¼š
- Tiger æœªé…ç½®ï¼šæŒä»“å¯èƒ½æ¥è‡ª Dummy æ•°æ®
- OpenAI æœªé…ç½®æˆ–å¤±è´¥ï¼š`ai_summary` å¯èƒ½ä¸ºè§„åˆ™æ‘˜è¦æˆ–ä¸ºç©ºï¼ˆä¸åº”é˜»æ–­é¡µé¢æ¸²æŸ“ï¼‰
- ä»£ç†ï¼šç½‘ç»œå—é™ç¯å¢ƒéœ€å¼€å¯ä»£ç†å OpenAI/FRED æ‰èƒ½è®¿é—®

---

## å››ã€å®è§‚é£é™©åˆ†ææ¨¡å—è®¾è®¡

### 4.1 åŠŸèƒ½å®šä¹‰

#### 4.1.1 é£é™©ç›‘æ§ç»´åº¦

**1. è´§å¸æ”¿ç­–é£é™© (Monetary Policy Risk)**
```
ç›‘æ§æŒ‡æ ‡:
- ç¾è”å‚¨åˆ©ç‡å†³è®®ã€ç‚¹é˜µå›¾é¢„æœŸ
- M2è´§å¸ä¾›åº”å¢é€Ÿ
- ç¾è”å‚¨èµ„äº§è´Ÿå€ºè¡¨è§„æ¨¡
- å®é™…åˆ©ç‡ vs è‡ªç„¶åˆ©ç‡
- é€šèƒ€é¢„æœŸ (CPI/PCE/æ ¸å¿ƒé€šèƒ€)
- ç¾å…ƒæŒ‡æ•° (DXY)

é£é™©ç­‰çº§: ä½/ä¸­/é«˜
å½“å‰çŠ¶æ€: "é¹°æ´¾æŒç»­ï¼ŒæµåŠ¨æ€§æ”¶ç¼©"
å½±å“èµ„äº§: "é«˜æˆé•¿è‚¡ã€ç§‘æŠ€è‚¡è´Ÿé¢"
```

**2. åœ°ç¼˜æ”¿æ²»é£é™© (Geopolitical Risk)**
```
ç›‘æ§äº‹ä»¶:
- ç¾ä¸­å…³ç³» (è´¸æ˜“/ç§‘æŠ€/å°æµ·)
- ä¿„ä¹Œæˆ˜äº‰è¿›å±•
- ä¸­ä¸œå±€åŠ¿ (ä»¥å·´å†²çªã€ä¼Šæœ—æ ¸é—®é¢˜)
- ç¾å›½å¤§é€‰/æ”¿æ²»æåŒ–
- æ¬§æ´²èƒ½æºå±æœº
- å…¨çƒä¾›åº”é“¾ä¸­æ–­

é£é™©ç­‰çº§: ä½/ä¸­/é«˜
çƒ­ç‚¹äº‹ä»¶: ["ç¾å›½å¤§é€‰ä¸´è¿‘", "ä¸­ä¸œå†²çªå‡çº§"]
é¿é™©å»ºè®®: "å¢åŠ é»„é‡‘ã€å›½å€ºé…ç½®"
```

**3. è¡Œä¸šæ³¡æ²«é£é™© (Sector Bubble Risk)**
```
ç›‘æ§è¡Œä¸š:
- AI/ç§‘æŠ€è‚¡æ³¡æ²« (Seven Magnificent ä¼°å€¼)
- åŠ å¯†è´§å¸æ³¡æ²«
- æˆ¿åœ°äº§æ³¡æ²«
- æ–°èƒ½æºæ±½è½¦/ç»¿è‰²èƒ½æº
- ç”Ÿç‰©ç§‘æŠ€

æ³¡æ²«æŒ‡æ ‡:
- è¡Œä¸šå¹³å‡PE vs å†å²åˆ†ä½æ•°
- æ•£æˆ·æŒä»“é›†ä¸­åº¦
- èèµ„ä½™é¢/æ æ†ç‡
- æ–°è‚¡å‘è¡Œçƒ­åº¦
- ç¤¾äº¤åª’ä½“æƒ…ç»ªæå€¼

å½“å‰è¯„ä¼°: "AIæ¿å—ä¼°å€¼è¿‡é«˜ï¼Œè­¦æƒ•å›è°ƒ"
```

**4. ç»æµå‘¨æœŸé£é™© (Economic Cycle Risk)**
```
ç›‘æ§æŒ‡æ ‡:
- GDPå¢é€Ÿã€PMIã€é›¶å”®é”€å”®
- å¤±ä¸šç‡ã€éå†œå°±ä¸š
- æ¶ˆè´¹è€…ä¿¡å¿ƒæŒ‡æ•°
- æ”¶ç›Šç‡æ›²çº¿ (2Y-10Yåˆ©å·®)
- é¢†å…ˆæŒ‡æ ‡æŒ‡æ•°
- è¡°é€€æ¦‚ç‡æ¨¡å‹

å‘¨æœŸé˜¶æ®µ: æ‰©å¼ /ç¹è£/è¡°é€€/è§æ¡
è¡°é€€æ¦‚ç‡: 35%
æŒç»­æ—¶é—´: "è·ç¦»è¡°é€€çº¦6-9ä¸ªæœˆ"
é˜²å¾¡ç­–ç•¥: "å¢åŠ é˜²å¾¡æ€§è‚¡ç¥¨ã€å‡å°‘å‘¨æœŸè‚¡"
```

**5. å¸‚åœºæƒ…ç»ªé£é™© (Market Sentiment Risk)**
```
ç›‘æ§æŒ‡æ ‡:
- VIXææ…ŒæŒ‡æ•°
- Put/Call Ratio
- AAIIæ•£æˆ·æƒ…ç»ªè°ƒæŸ¥
- CNN Fear & Greed Index
- èµ„é‡‘æµå‘ (è‚¡ç¥¨/å€ºåˆ¸/ç°é‡‘)
- å†…éƒ¨äººäº¤æ˜“ (é«˜ç®¡å¢å‡æŒ)

å½“å‰æƒ…ç»ª: è´ªå©ª/ææƒ§/ä¸­æ€§
æç«¯ä¿¡å·: "VIXä½äº15ï¼Œå¸‚åœºè¿‡åº¦ä¹è§‚"
```

### 4.2 å®è§‚é£é™©ç»¼åˆè¯„åˆ†

```
å®è§‚é£é™©æ€»åˆ† (0-100ï¼Œè¶Šé«˜è¶Šå®‰å…¨):

æ€»åˆ† = è´§å¸æ”¿ç­– Ã— 30% + åœ°ç¼˜æ”¿æ²» Ã— 20% + è¡Œä¸šæ³¡æ²« Ã— 20% + ç»æµå‘¨æœŸ Ã— 20% + å¸‚åœºæƒ…ç»ª Ã— 10%

ç¤ºä¾‹:
- è´§å¸æ”¿ç­–: 60/100 (ä¸­æ€§åç´§)
- åœ°ç¼˜æ”¿æ²»: 50/100 (å¤šä¸ªçƒ­ç‚¹)
- è¡Œä¸šæ³¡æ²«: 45/100 (AIä¼°å€¼è¿‡é«˜)
- ç»æµå‘¨æœŸ: 55/100 (è½¯ç€é™†æ¦‚ç‡ä¸Šå‡)
- å¸‚åœºæƒ…ç»ª: 40/100 (è¿‡åº¦ä¹è§‚)

æ€»åˆ†: 52/100 â†’ "ä¸­ç­‰é£é™©ï¼Œå»ºè®®ä¿æŒé˜²å¾¡æ€§é…ç½®"
```

### 4.3 æ•°æ®æºè®¾è®¡

#### 4.3.1 å®è§‚æ•°æ® API
```python
1. FRED (Federal Reserve Economic Data) - å…è´¹
   - ç¾è”å‚¨æ•°æ®
   - å®è§‚ç»æµæŒ‡æ ‡
   - åˆ©ç‡ã€é€šèƒ€ã€è´§å¸ä¾›åº”
   
2. Alpha Vantage - éƒ¨åˆ†å…è´¹
   - ç»æµæŒ‡æ ‡ API
   - æŠ€æœ¯æŒ‡æ ‡
   
3. Trading Economics - ä»˜è´¹
   - å…¨çƒå®è§‚æ•°æ®
   - ç»æµæ—¥å†
   
4. News API / RSS
   - å®æ—¶æ–°é—»ç›‘æ§
   - å…³é”®äº‹ä»¶æå–
   
5. GPT-4 API
   - æ–°é—»äº‹ä»¶è§£è¯»
   - é£é™©è¯„ä¼°
   - AIæ€»ç»“
```

### 4.4 æ•°æ®åº“è®¾è®¡

#### 4.4.1 å®è§‚æŒ‡æ ‡è¡¨
```sql
CREATE TABLE macro_indicators (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    timestamp DATETIME DEFAULT CURRENT_TIMESTAMP,
    indicator_type TEXT NOT NULL,    -- MONETARY/GEOPOLITICAL/SECTOR/ECONOMIC/SENTIMENT
    
    -- è´§å¸æ”¿ç­–
    fed_rate REAL,
    m2_growth_rate REAL,
    fed_balance_sheet BIGINT,
    inflation_rate REAL,
    dxy_index REAL,
    
    -- ç»æµå‘¨æœŸ
    gdp_growth REAL,
    unemployment_rate REAL,
    pmi_index REAL,
    yield_curve_2y10y REAL,
    recession_probability REAL,
    
    -- å¸‚åœºæƒ…ç»ª
    vix_index REAL,
    put_call_ratio REAL,
    fear_greed_index INTEGER,
    
    UNIQUE(date(timestamp), indicator_type)
);
```

#### 4.4.2 å®è§‚é£é™©è¯„åˆ†è¡¨
```sql
CREATE TABLE macro_risk_scores (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    timestamp DATETIME DEFAULT CURRENT_TIMESTAMP,
    
    -- åˆ†é¡¹è¯„åˆ† (0-100)
    monetary_policy_score INTEGER,
    geopolitical_score INTEGER,
    sector_bubble_score INTEGER,
    economic_cycle_score INTEGER,
    sentiment_score INTEGER,
    
    -- ç»¼åˆè¯„åˆ†
    overall_score INTEGER,
    risk_level TEXT,                 -- LOW/MEDIUM/HIGH/EXTREME
    
    -- AIåˆ†æ
    risk_summary TEXT,
    key_concerns TEXT,               -- JSON array
    recommendations TEXT,
    
    -- å…ƒæ•°æ®
    data_sources TEXT,               -- JSON array
    confidence REAL,
    
    UNIQUE(date(timestamp))
);
```

#### 4.4.3 åœ°ç¼˜æ”¿æ²»äº‹ä»¶è¡¨
```sql
CREATE TABLE geopolitical_events (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    event_date DATETIME NOT NULL,
    event_type TEXT,                 -- TRADE_WAR/MILITARY/ELECTION/SANCTION
    region TEXT,
    title TEXT,
    description TEXT,
    
    -- å½±å“è¯„ä¼°
    severity TEXT,                   -- LOW/MEDIUM/HIGH/CRITICAL
    affected_sectors TEXT,           -- JSON array
    market_impact_score INTEGER,     -- 0-100
    
    -- æ¥æº
    news_source TEXT,
    news_url TEXT,
    
    UNIQUE(event_date, title)
);
```

### 4.5 API è®¾è®¡

#### 4.5.1 è·å–å®è§‚é£é™©æ¦‚è§ˆ
```http
GET /macro/risk/overview

Response:
{
  "timestamp": "2025-12-31T10:30:00Z",
  "overall_risk": {
    "score": 52,
    "level": "MEDIUM",
    "trend": "INCREASING",           // INCREASING/STABLE/DECREASING
    "summary": "å®è§‚ç¯å¢ƒä¸­æ€§åç©ºï¼Œè´§å¸æ”¿ç­–ç´§ç¼©ï¼Œåœ°ç¼˜é£é™©ä¸Šå‡ï¼ŒAIæ¿å—ä¼°å€¼è¿‡é«˜"
  },
  
  "risk_breakdown": {
    "monetary_policy": {
      "score": 60,
      "level": "MEDIUM",
      "status": "é¹°æ´¾æŒç»­ï¼ŒæµåŠ¨æ€§æ”¶ç¼©",
      "key_indicators": {
        "fed_rate": 5.50,
        "next_meeting": "2025-01-31",
        "rate_cut_probability": 0.25,
        "inflation_cpi": 3.2,
        "inflation_target": 2.0
      },
      "impact": {
        "positive_sectors": ["Financial", "Energy"],
        "negative_sectors": ["Technology", "Growth Stocks"]
      }
    },
    
    "geopolitical": {
      "score": 50,
      "level": "MEDIUM",
      "hot_spots": [
        {
          "event": "US Election 2024",
          "severity": "HIGH",
          "probability": 0.95,
          "impact": "Policy uncertainty, market volatility"
        },
        {
          "event": "Middle East Conflict",
          "severity": "MEDIUM",
          "probability": 0.70,
          "impact": "Oil price volatility, safe haven demand"
        }
      ],
      "safe_haven_recommendation": "Gold, US Treasury, Defense stocks"
    },
    
    "sector_bubble": {
      "score": 45,
      "level": "MEDIUM_HIGH",
      "bubbles": [
        {
          "sector": "AI/Technology",
          "bubble_probability": 0.65,
          "indicators": {
            "avg_pe": 45.2,
            "historical_percentile": 92,
            "retail_ownership": 0.35,
            "margin_debt": "elevated"
          },
          "warning": "Magnificent 7ä¼°å€¼è¿‡é«˜ï¼Œæ³¨æ„å›è°ƒé£é™©"
        },
        {
          "sector": "Cryptocurrency",
          "bubble_probability": 0.80,
          "warning": "æç«¯æŠ•æœºæƒ…ç»ªï¼Œå»ºè®®é™ä½ä»“ä½"
        }
      ]
    },
    
    "economic_cycle": {
      "score": 55,
      "level": "MEDIUM",
      "stage": "Late Expansion",
      "recession_probability": 0.35,
      "time_to_recession": "6-9 months",
      "leading_indicators": {
        "pmi": 48.5,
        "yield_curve": -0.25,
        "unemployment_trend": "rising",
        "consumer_confidence": 65.2
      },
      "defensive_strategy": "Increase healthcare, utilities, consumer staples"
    },
    
    "market_sentiment": {
      "score": 40,
      "level": "RISK_ON",
      "status": "è¿‡åº¦ä¹è§‚ï¼Œè­¦æƒ•åè½¬",
      "indicators": {
        "vix": 14.2,
        "put_call_ratio": 0.65,
        "fear_greed_index": 72,
        "aaii_bullish": 0.52,
        "aaii_bearish": 0.22
      },
      "warning": "Complacency high, volatility may spike"
    }
  },
  
  "ai_recommendations": [
    "è€ƒè™‘é™ä½ç§‘æŠ€è‚¡ä»“ä½è‡³30%ä»¥ä¸‹",
    "å¢åŠ é˜²å¾¡æ€§æ¿å—é…ç½®ï¼ˆåŒ»ç–—ã€å…¬ç”¨äº‹ä¸šï¼‰",
    "ä¿æŒ10-15%ç°é‡‘æ¯”ä¾‹åº”å¯¹æ³¢åŠ¨",
    "å…³æ³¨åœ°ç¼˜æ”¿æ²»äº‹ä»¶å¯¹èƒ½æºã€å›½é˜²è‚¡çš„å½±å“",
    "è­¦æƒ•VIXçªç ´20çš„ç³»ç»Ÿæ€§é£é™©"
  ],
  
  "next_key_events": [
    {
      "date": "2025-01-15",
      "event": "CPIæ•°æ®å‘å¸ƒ",
      "importance": "HIGH"
    },
    {
      "date": "2025-01-31",
      "event": "ç¾è”å‚¨FOMCä¼šè®®",
      "importance": "CRITICAL"
    }
  ]
}
```

#### 4.5.2 è·å–è´§å¸æ”¿ç­–åˆ†æ
```http
GET /macro/monetary-policy

Response: (è¯¦ç»†çš„è´§å¸æ”¿ç­–åˆ†æ)
```

#### 4.5.3 è·å–åœ°ç¼˜æ”¿æ²»äº‹ä»¶
```http
GET /macro/geopolitical-events?days=30

Response: (æœ€è¿‘30å¤©çš„åœ°ç¼˜æ”¿æ²»äº‹ä»¶åŠå½±å“)
```

#### 4.5.4 åˆ·æ–°å®è§‚æ•°æ®
```http
POST /macro/refresh
{
  "indicators": ["all"],             // æˆ–æŒ‡å®š ["monetary", "geopolitical"]
  "use_cache": true
}
```

---

## äº”ã€å®ç°è·¯çº¿å›¾ä¸è¿›åº¦

### 5.1 å·²å®ŒæˆåŠŸèƒ½ âœ…

#### 5.1.1 å‰ç«¯æ¶æ„ (å·²å®Œæˆ)
- âœ… Vue 3 + TypeScript + Vite é¡¹ç›®æ­å»º
- âœ… Vue Router 4 è·¯ç”±ç³»ç»Ÿé›†æˆ
- âœ… ä¸‰ä¸ªç‹¬ç«‹é¡µé¢ç»„ä»¶åˆ›å»º
  - âœ… BehaviorScorePage.vue (è¡Œä¸ºè¯„åˆ†)
  - âœ… PositionsPage.vue (æŒä»“è¯„ä¼°)
  - âœ… MacroRiskPage.vue (å®è§‚é£é™©)
- âœ… å…¨å±€é…ç½®ç®¡ç† (global.ts)
- âœ… Axios HTTP å®¢æˆ·ç«¯é…ç½® (30ç§’è¶…æ—¶)
- âœ… æ·±è‰²ä¸»é¢˜ UI è®¾è®¡

#### 5.1.2 é¡µé¢çº§è¯´æ˜ç»„ä»¶ (å·²å®Œæˆ)
- âœ… BehaviorGuideline.vue (è¡Œä¸ºè¯„åˆ†è¯´æ˜)
  - åŒ…å«ï¼šè¡Œä¸ºè¯„åˆ†ã€è‡è¥ç‹—è‹Ÿã€è¿‡åº¦äº¤æ˜“ã€æŠ¥å¤æ€§äº¤æ˜“è¯´æ˜
  - åŒ…å«ï¼šGreeks æŒ‡æ ‡è¯¦è§£å’Œæ“ä½œå»ºè®®
- âœ… PositionsGuideline.vue (æŒä»“è¯„ä¼°è¯´æ˜)
  - åŒ…å«ï¼šæŠ€æœ¯é¢ã€åŸºæœ¬é¢ã€æƒ…ç»ªé¢è¯„åˆ†è¯¦è§£
  - åŒ…å«ï¼šæ“ä½œå»ºè®®å’Œé£é™©ç­‰çº§è¯´æ˜
- âœ… MacroRiskGuideline.vue (å®è§‚é£é™©è¯´æ˜)
  - åŒ…å«ï¼šäº”ç»´é£é™©æ¨¡å‹è¯¦ç»†è¯´æ˜
  - åŒ…å«ï¼šé£é™©åº”å¯¹ç­–ç•¥å’Œç›‘æµ‹æŒ‡æ ‡

#### 5.1.3 é”™è¯¯å¤„ç†ä¸ç”¨æˆ·ä½“éªŒ (å·²å®Œæˆ)
- âœ… è¶…æ—¶é”™è¯¯å‹å¥½æç¤º (â±ï¸ è¯·æ±‚è¶…æ—¶ï¼Œè¯·ç¨åå†è¯•ï¼)
- âœ… ç½‘ç»œé”™è¯¯æç¤º (ğŸŒ ç½‘ç»œè¿æ¥å¤±è´¥...)
- âœ… åŠ è½½çŠ¶æ€æ˜¾ç¤º
- âœ… ç©ºæ•°æ®çŠ¶æ€å¤„ç†
- âœ… å›¾æ ‡ä¹±ç ä¿®å¤ (å®è§‚é£é™© ğŸŒ)

#### 5.1.4 API å®¢æˆ·ç«¯ (å·²å®Œæˆ)
- âœ… fetchAiState() - è·å–è¡Œä¸ºè¯„åˆ†çŠ¶æ€
- âœ… rebuildBehavior() - é‡æ–°è®¡ç®—è¡Œä¸ºè¯„åˆ†
- âœ… fetchPositionsAssessment() - è·å–æŒä»“è¯„ä¼°
- âœ… refreshPositions() - åˆ·æ–°æŒä»“æ•°æ®
- âœ… fetchMacroRiskOverview() - è·å–å®è§‚é£é™©æ¦‚è§ˆ
- âœ… refreshMacroData() - åˆ·æ–°å®è§‚æ•°æ®
- âœ… æ‰€æœ‰ API å‡½æ•°é…ç½®è¶…æ—¶å’Œé”™è¯¯å¤„ç†

### 5.2 è¿›è¡Œä¸­åŠŸèƒ½ ğŸ”„

#### 5.2.1 åç«¯ API å®ç°
- ğŸ”„ æŒä»“è¯„ä¼° API endpoints
- ğŸ”„ æŠ€æœ¯åˆ†ææ•°æ®é‡‡é›†
- ğŸ”„ åŸºæœ¬é¢æ•°æ®é›†æˆ
- ğŸ”„ å®è§‚é£é™©è¯„åˆ†ç®—æ³•

### 5.3 å¾…å®ç°åŠŸèƒ½ ğŸ“‹

#### 5.3.1 æ•°æ®å±‚ (Phase 1-2)
- [ ] æ•°æ®åº“è¡¨ç»“æ„è®¾è®¡å’Œåˆ›å»º
- [ ] å¤–éƒ¨ API é›†æˆ (yfinance, FMP, FRED)
- [ ] ç¼“å­˜æœºåˆ¶è®¾è®¡
- [ ] æŠ€æœ¯æŒ‡æ ‡è®¡ç®—å¼•æ“
å…­ã€æŠ€æœ¯æ ˆ

### 6.1 å‰ç«¯æŠ€æœ¯ (å·²å®ç°)å’Œå­˜å‚¨
- [ ] ä¼°å€¼æ¨¡å‹å®ç°
æ ¸å¿ƒæ¡†æ¶:
- Vue 3.5.0 (Composition API)
- TypeScript 5.7.3
- Vue Router 4.x
- Vite 7.3.0

HTTP å®¢æˆ·ç«¯:
- Axios 1.7.0 (30ç§’è¶…æ—¶é…ç½®)

UI é£æ ¼:
- æ·±è‰²ä¸»é¢˜ (ä¸“ä¸šé‡‘èé£æ ¼)
- å“åº”å¼è®¾è®¡ (ç§»åŠ¨ç«¯é€‚é…)
- æ¸å˜åŠ¨ç”»æ•ˆæœ
- å›¾æ ‡: Emoji Unicode

ç»„ä»¶åº“ (è‡ªç ”):
- RiskSummaryCard (é£é™©æ€»è§ˆå¡ç‰‡)
- GreeksWaterLevel (Greeksæ°´ä½å›¾)
- SymbolBehaviorCard (æ ‡çš„è¡Œä¸ºå¡ç‰‡)
- PositionScoreCard (æŒä»“è¯„åˆ†å¡ç‰‡)
- MacroRiskDashboard (å®è§‚é£é™©ä»ªè¡¨ç›˜)
- BehaviorGuideline (è¡Œä¸ºè¯„åˆ†è¯´æ˜)
- PositionsGuideline (æŒä»“è¯„ä¼°è¯´æ˜)
- MacroRiskGuideline (å®è§‚é£é™©è¯´æ˜)
```

### 6.2 åç«¯æŠ€æœ¯ (ç°æœ‰ + è§„åˆ’)
```
ç°æœ‰æŠ€æœ¯æ ˆ:
- FastAPI
- SQLite + SQLAlchemy (async)
- Tä¸ƒger Open API
- Python 3.11+
7
è§„åˆ’æ–°å¢:
- yfinance: è·å–å¸‚åœºæ•°æ®
- pandas-ta: æŠ€æœ¯æŒ‡æ ‡è®¡ç®—
- financialmodelingprep: åŸºæœ¬é¢æ•°æ®
- fredapi: ç¾è”å‚¨ç»æµæ•°æ®
- openai: GPT-4 AIåˆ†æ
- newsapi: æ–°é—»æ•°æ®
- apscheduler: å®šæ—¶ä»»åŠ¡
```

### 6.3 æœªæ¥å›¾è¡¨åº“è§„åˆ’
```
æŠ€æœ¯å›¾è¡¨:
- TradingView Lightweight Charts
- EC7.2 å¼€å‘æˆæœ¬ (é¢„ä¼°)è§‚æ•°æ®å¯è§†åŒ–)

é«˜çº§ç»„ä»¶:
- Heat Map (è¡Œä¸š/æ¿å—çƒ­åŠ›å›¾)
- Timeline (äº‹ä»¶æ—¶é—´çº¿)
- Candlestick Chart (Kçº¿

###å…«5.1 åç«¯æŠ€æœ¯
```
ç°æœ‰æŠ€æœ¯8:
- FastAPI
- SQLite + SQLAlchemy (async)
- Tiger Open API

æ–°å¢ä¾èµ–:
- yf8nance: è·å–å¸‚åœºæ•°æ®
- pandas-ta: æŠ€æœ¯æŒ‡æ ‡è®¡ç®—
- financialmodelingprep: åŸºæœ¬é¢æ•°æ®
- fredapi: ç¾è”å‚¨ç»æµæ•°æ®
- openai: GPT-4 AIåˆ†æ
- ne8sapi: æ–°é—»æ•°æ®
- apscheduler: å®šæ—¶ä»»åŠ¡
```

### 5.2 å‰ç«¯å»ºè®®
```
å›¾è¡¨åº“:
- TradingView Lightweight Charts (æŠ€æœ¯å›¾è¡¨)
- Eä¹harts (å®è§‚æ•°æ®å¯è§†åŒ–)
- Recharts (Portfolioåˆ†æ)

UIç»„ä»¶:
- Risk Level Indicator (é£é™©ç­‰çº§æŒ‡ç¤ºå™¨)
- Score Card (è¯„åˆ†å¡ç‰‡)
- Timeline (äº‹ä»¶æ—¶é—´çº¿)
- Heat Map (è¡Œä¸š/æ¿å—çƒ­åŠ›å›¾)
```

---

## å…­ã€æˆæœ¬ä¼°ç®—

### 6.1 API è´¹ç”¨ (æœˆåº¦)
```
å…è´¹:
- yfinance: $0
- FRED API: $0
- Tiger API: $0 (å·²æœ‰)
## åã€é¡¹ç›®æ–‡ä»¶ç»“æ„

```
ai_trading_frontend_v4/
â”œâ”€â”€ index.html                          # å…¥å£ HTML
â”œâ”€â”€ package.json                        # é¡¹ç›®ä¾èµ–é…ç½®
â”œâ”€â”€ tsconfig.json                       # TypeScript é…ç½®
â”œâ”€â”€ vite.config.ts                      # Vite æ„å»ºé…ç½®
â”œâ”€â”€ README.md                           # é¡¹ç›®è¯´æ˜
â”œâ”€â”€ POSITION_AND_MACRO_RISK_DESIGN.md  # æœ¬è®¾è®¡æ–‡æ¡£
â”‚
â””â”€â”€ src/
    â”œâ”€â”€ main.ts                         # åº”ç”¨å…¥å£
    â”œâ”€â”€ App.vue                         # æ ¹ç»„ä»¶ (å¸ƒå±€+å¯¼èˆª)
    â”œâ”€â”€ style.css                       # å…¨å±€æ ·å¼
    â”‚
    â”œâ”€â”€ router/
    â”‚   â””â”€â”€ index.ts                    # Vue Router é…ç½®
    â”‚
    â”œâ”€â”€ config/
    â”‚   â””â”€â”€ global.ts                   # å…¨å±€é…ç½® (windowDays)
    â”‚
    â”œâ”€â”€ api/
    â”‚   â””â”€â”€ client.ts                   # API å®¢æˆ·ç«¯ (Axios)
    â”‚
    â”œâ”€â”€ views/                          # é¡µé¢ç»„ä»¶
    â”‚   â”œâ”€â”€ BehaviorScorePage.vue       # è¡Œä¸ºè¯„åˆ†é¡µé¢
    â”‚   â”œâ”€â”€ PositionsPage.vue           # æŒä»“è¯„ä¼°é¡µé¢
    â”‚   â””â”€â”€ MacroRiskPage.vue           # å®è§‚é£é™©é¡µé¢
    â”‚
    â””â”€â”€ components/                     # å¯å¤ç”¨ç»„ä»¶
        â”œâ”€â”€ RiskSummaryCard.vue         # é£é™©æ€»è§ˆå¡ç‰‡
        â”œâ”€â”€ GreeksWaterLevel.vue        # Greeksæ°´ä½å›¾
        â”œâ”€â”€ SymbolBehaviorCard.vue      # æ ‡çš„è¡Œä¸ºå¡ç‰‡
        â”œâ”€â”€ PositionScoreCard.vue       # æŒä»“è¯„åˆ†å¡ç‰‡
        â”œâ”€â”€ MacroRiskDashboard.vue      # å®è§‚é£é™©ä»ªè¡¨ç›˜
        â”œâ”€â”€ BehaviorGuideline.vue       # è¡Œä¸ºè¯„åˆ†è¯´æ˜
        â”œâ”€â”€ PositionsGuideline.vue      # æŒä»“è¯„ä¼°è¯´æ˜
        â”œâ”€â”€ MacroRiskGuideline.vue      # å®è§‚é£é™©è¯´æ˜
        â”œâ”€â”€ FundamentalCard.vue         # åŸºæœ¬é¢å¡ç‰‡
        â”œâ”€â”€ TechnicalChart.vue          # æŠ€æœ¯å›¾è¡¨
        â”œâ”€â”€ RiskLevelIndicator.vue      # é£é™©ç­‰çº§æŒ‡ç¤ºå™¨
        â””â”€â”€ ScoreGuideline.vue          # é€šç”¨è¯„åˆ†æŒ‡å— (å·²å¼ƒç”¨)
```

---

## åä¸€ã€ç‰ˆæœ¬å†å²

### v2.0 (2026-01-05) - å‰ç«¯æ¶æ„é‡æ„ âœ…
**é‡å¤§æ›´æ–°**ï¼š
- ä» Tab é¡µåˆ‡æ¢æ”¹ä¸º Vue Router é¡µé¢å¯¼èˆª
- window_days æå–ä¸ºå…¨å±€é…ç½®
- è¯„åˆ†æ ‡å‡†è¯´æ˜ä»ä¾§è¾¹æ ç§»è‡³å„é¡µé¢åº•éƒ¨
- è¶…æ—¶å’Œç½‘ç»œé”™è¯¯å‹å¥½æç¤º
- ä¿®å¤å®è§‚é£é™©å›¾æ ‡ä¹±ç 

**æ–‡ä»¶å˜æ›´**ï¼š
- æ–°å¢ï¼š`src/router/index.ts` (è·¯ç”±é…ç½®)
- æ–°å¢ï¼š`src/config/global.ts` (å…¨å±€é…ç½®)
- æ–°å¢ï¼š`src/views/BehaviorScorePage.vue`
- æ–°å¢ï¼š`src/views/PositionsPage.vue`
- æ–°å¢ï¼š`src/views/MacroRiskPage.vue`
- æ–°å¢ï¼š`src/components/BehaviorGuideline.vue`
- æ–°å¢ï¼š`src/components/PositionsGuideline.vue`
- æ–°å¢ï¼š`src/components/MacroRiskGuideline.vue`
- é‡æ„ï¼š`src/App.vue` (æ”¹ä¸ºè·¯ç”±å®¹å™¨)
- æ›´æ–°ï¼š`src/api/client.ts` (æ·»åŠ é”™è¯¯å¤„ç†)

### v1.0 (2025-12) - åˆå§‹ç‰ˆæœ¬
- è¡Œä¸ºè¯„åˆ†æ¨¡å—åŸºç¡€å®ç°
- Tab é¡µåˆ‡æ¢å¼ UI
- åŸºç¡€ API é›†æˆ

---

**ä¸‹ä¸€æ­¥è¡ŒåŠ¨è®¡åˆ’**ï¼š
1. âœ… å®Œæˆå‰ç«¯æ¶æ„å’Œ UI/UX è®¾è®¡
2. ğŸ”„ ç»§ç»­å®Œå–„åç«¯ API å®ç°
3. ğŸ“‹ é›†æˆå¤–éƒ¨æ•°æ®æº (yfinance, FMP, FRED)
4. ğŸ“‹ å®ç°æŠ€æœ¯æŒ‡æ ‡å’Œè¯„åˆ†ç®—æ³•
5. ğŸ“‹ AI åˆ†æå¢å¼º~$50/æœˆ (é¢„ä¼°è°ƒç”¨é‡)
- News API: $49/æœˆ (Businessè®¡åˆ’)

æ€»è®¡: ~$130/æœˆ
```

### 6.2 å¼€å‘æˆæœ¬
```
é¢„ä¼°: 14å‘¨ Ã— 40å°æ—¶/å‘¨ = 560å°æ—¶
```

---

## ä¸ƒã€é£é™©å’ŒæŒ‘æˆ˜

### 7.1 æŠ€æœ¯é£é™©
- API é™æµå’Œç¨³å®šæ€§
- æ•°æ®è´¨é‡å’Œå‡†ç¡®æ€§
- å®æ—¶æ€§è¦æ±‚ vs æˆæœ¬å¹³è¡¡
- æ¨¡å‹å‡†ç¡®åº¦éªŒè¯

### 7.2 åˆè§„é£é™©
- æŠ•èµ„å»ºè®®åˆè§„æ€§ï¼ˆéœ€è¦å…è´£å£°æ˜ï¼‰
- æ•°æ®ä½¿ç”¨è®¸å¯
- ç”¨æˆ·éšç§ä¿æŠ¤

### 7.3 ç¼“è§£æªæ–½
- å¤šæ•°æ®æºå¤‡ä»½
- ç¼“å­˜æœºåˆ¶é™ä½APIè°ƒç”¨
- A/Bæµ‹è¯•éªŒè¯æ¨¡å‹æ•ˆæœ
- æ˜ç¡®"ä»…ä¾›å‚è€ƒ"å£°æ˜

---

## å…«ã€åç»­ä¼˜åŒ–æ–¹å‘

1. **æœºå™¨å­¦ä¹ å¢å¼º**
   - é¢„æµ‹æ¨¡å‹ï¼ˆä»·æ ¼é¢„æµ‹ã€é£é™©é¢„æµ‹ï¼‰
   - å¼‚å¸¸æ£€æµ‹ï¼ˆé»‘å¤©é¹…äº‹ä»¶ï¼‰
   
2. **ä¸ªæ€§åŒ–æ¨è**
   - åŸºäºç”¨æˆ·é£é™©åå¥½çš„å®šåˆ¶åŒ–å»ºè®®
   - å­¦ä¹ ç”¨æˆ·äº¤æ˜“ä¹ æƒ¯
   
3. **ç¤¾äº¤åŠŸèƒ½**
   - ä¸“å®¶è§‚ç‚¹èšåˆ
   - ç¤¾åŒºæƒ…ç»ªåˆ†æ
   
4. **ç§»åŠ¨ç«¯ä¼˜åŒ–**
   - å®æ—¶æ¨é€
   - è½»é‡çº§Dashboard

---

**å‡†å¤‡å¥½å¼€å§‹å®æ–½äº†å—ï¼Ÿå»ºè®®ä» Phase 1 å¼€å§‹ï¼Œæˆ‘å¯ä»¥å¸®æ‚¨ï¼š**
1. åˆ›å»ºæ•°æ®åº“ Migration è„šæœ¬
2. é›†æˆç¬¬ä¸€ä¸ªå¤–éƒ¨ API (yfinance)
3. å®ç°ç¬¬ä¸€ä¸ªæŠ€æœ¯æŒ‡æ ‡è®¡ç®—å‡½æ•°

---

## ä¹ã€æ›´æ–°æ—¥å¿—

### 2026-01-06 - æ ¹æ®FRONTEND_POSITIONS_ASSESSMENT_GUIDE.mdæ›´æ–°

**æ›´æ–°å†…å®¹**ï¼š
1. **æ·»åŠ äº§å“æ ¸å¿ƒçº¦æŸç« èŠ‚ï¼ˆ1.3ï¼‰**
   - å®è§‚ä¸çŸ­æœŸè¶‹åŠ¿ä¸è”åŠ¨
   - è¶‹åŠ¿å¿«ç…§æŒä¹…åŒ–æœºåˆ¶
   - ä¸è¾“å‡ºè¶‹åŠ¿ç½®ä¿¡åº¦çš„æ˜ç¡®çº¦æŸ

2. **æ›´æ–°æŒä»“è¯„ä¼°æ•°æ®ç»“æ„**
   - æ·»åŠ  `TrendSnapshot` æ¥å£å®šä¹‰
   - æ–°å¢å­—æ®µï¼š`market_value`, `unrealized_pnl_percent`, `target_position`, `stop_loss`, `take_profit`
   - æ›´æ–° `risk_level` æšä¸¾å€¼ï¼š`LOW/MEDIUM/HIGH/EXTREME`ï¼ˆåŸä¸º CRITICALï¼‰
   - æ›´æ–° `recommendation` æšä¸¾å€¼ï¼š`BUY/STRONG_BUY/HOLD/REDUCE/SELL`

3. **æ–°å¢æ—¥çº¿è¶‹åŠ¿å¿«ç…§åŠŸèƒ½è®¾è®¡ï¼ˆ3.1.0ï¼‰**
   - Wall Street äº¤æ˜“å‘˜è§†è§’çš„è¶‹åŠ¿åˆ†æ
   - æŒä¹…åŒ–ç¼“å­˜æœºåˆ¶è¯´æ˜
   - æŒ‰éœ€ç”Ÿæˆä¸é™çº§æœºåˆ¶
   - UIå±•ç¤ºåŸåˆ™ï¼ˆè¶‹åŠ¿æ–¹å‘ã€å¼ºåº¦ã€å…³é”®ä½ã€é‡èƒ½ï¼‰
   - ç©ºæ€ä¸åˆ·æ–°äº¤äº’è®¾è®¡

4. **æ›´æ–°æŒä»“è¯„ä¼°é¡µé¢è®¾è®¡ï¼ˆ2.3.2ï¼‰**
   - æ·»åŠ è¶‹åŠ¿å¿«ç…§å¡ç‰‡ç»„ä»¶ï¼ˆTrendSnapshotCardï¼‰
   - æ›´æ–°APIæ¥å£è°ƒç”¨æµç¨‹
   - æ·»åŠ ç©ºæ€ä¸é™çº§å¤„ç†è¯´æ˜
   - æ›´æ–°SummaryBarå¢åŠ BUYæ¨èæ•°é‡

5. **æ›´æ–°æŒä»“è¯„ä¼°è¯´æ˜æŒ‡å—ï¼ˆ2.4.2ï¼‰**
   - æ·»åŠ æ—¥çº¿è¶‹åŠ¿å¿«ç…§è¯´æ˜
   - RSI/MACD/å¸ƒæ—å¸¦æŒ‡æ ‡çŠ¶æ€è¯´æ˜
   - å…³é”®ä»·ä½å’Œé‡èƒ½åˆ†æè¯´æ˜
   - æ·»åŠ é‡è¦æç¤ºï¼ˆå®è§‚ç‹¬ç«‹ã€å¿«ç…§æŒä¹…åŒ–ï¼‰

6. **æ–°å¢å‰ç«¯APIæ¥å£æ¸…å•ç« èŠ‚ï¼ˆ3.5ï¼‰**
   - è¯¦ç»†çš„APIæ¥å£æ–‡æ¡£å’Œç¤ºä¾‹
   - å­—æ®µè¯´æ˜å’Œæšä¸¾å€¼å®šä¹‰
   - è°ƒç”¨æ—¶æœºå’Œæµç¨‹è¯´æ˜
   - å‰ç«¯æ³¨æ„äº‹é¡¹å’Œèƒ½åŠ›å¼€å…³å½±å“

7. **æ›´æ–°é¡µé¢å¸ƒå±€è®¾è®¡**
   - æŒä»“è¯„ä¼°é¡µé¢å¢åŠ è¶‹åŠ¿å¿«ç…§å±•ç¤º
   - æ”¯æ’‘/é˜»åŠ›ä½æ˜¾ç¤ºè®¾è®¡
   - é‡èƒ½æ¯”ç‡å¯è§†åŒ–è®¾è®¡
   - AIæ‘˜è¦å±•ç¤ºè§„èŒƒ

**é‡è¦çº¦æŸå¼ºè°ƒ**ï¼š
- âŒ ä¸å®ç°è¶‹åŠ¿ç½®ä¿¡åº¦å­—æ®µ
- âœ… è¶‹åŠ¿å¿«ç…§å…è®¸ä¸ºç©ºï¼Œå¿…é¡»åšç©ºæ€å¤„ç†
- âœ… å®è§‚é£é™©ä¸æŒä»“è¶‹åŠ¿åˆ†åŒºå±•ç¤ºï¼Œä¸æ··åˆä¿¡å·
- âœ… è¶‹åŠ¿å¼ºåº¦æ ‡æ³¨ä¸º"ç®—æ³•å¼ºåº¦"è€Œé"ç½®ä¿¡åº¦"

**å‚è€ƒæ–‡æ¡£**ï¼š
- `FRONTEND_POSITIONS_ASSESSMENT_GUIDE.md`ï¼ˆå‰ç«¯æ¥å…¥æŒ‡å—ï¼‰
- `Overview.md`ï¼ˆäº§å“å£å¾„ï¼‰
- `API.md`ï¼ˆæ¥å£å¥‘çº¦ï¼‰

---

*æœ¬æ–‡æ¡£æŒç»­æ›´æ–°ä¸­ï¼Œæœ€åæ›´æ–°ï¼š2026-01-06*
