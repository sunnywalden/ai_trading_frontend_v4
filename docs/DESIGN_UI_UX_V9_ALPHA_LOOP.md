# 前端 UI/UX 设计文档 V9 — Alpha Loop

> 适配 V9 Alpha Loop 完整交易闭环
> 文档版本：v9.0
> 日期：2026-02-09
> 依赖：PRD_V9_ALPHA_LOOP.md

---

## 1. 设计目标

- **一屏全览**：Dashboard 首页一屏知晓账户权益、风险水位、今日盈亏、待执行计划
- **闭环体验**：信号 → 计划 → 执行 → 复盘在系统内闭环完成
- **实时感知**：WebSocket 驱动的信号、告警、订单状态实时更新
- **单日 ≤ 5 步**：核心操作路径极简化

---

## 2. 设计约束（继承）

1. 宏观与短期趋势不联动
2. 趋势快照持久化（后端快照表）
3. 不输出趋势置信度数值
4. 深色终端风格（Bloomberg Terminal 审美，保持一致）

---

## 3. 信息架构（V9）

```
                     ┌─────────────────┐
                     │   交易仪表盘     │ ← 首页 (NEW)
                     │   Dashboard      │
                     └────────┬────────┘
        ┌──────┬──────┬──────┼──────┬──────┬──────┐
        │      │      │      │      │      │      │
   ┌────▼──┐┌──▼───┐┌─▼──┐┌─▼──┐┌──▼──┐┌──▼──┐┌──▼───┐
   │市场热点││行为  ││持仓││宏观││策略 ││股票 ││交易  │
   │       ││评分  ││评估││分析││筛选 ││分析 ││计划  │
   └───────┘└──────┘└────┘└────┘└─────┘└─────┘└──────┘
        ┌──────┬──────┬──────┐
        │      │      │      │
   ┌────▼──┐┌──▼───┐┌─▼────┐┌─▼───────┐
   │交易日志││资金  ││价格  ││系统监控  │
   │(NEW)  ││曲线  ││告警  ││(合并)    │
   └───────┘│(NEW) ││(NEW) │└─────────┘
            └──────┘└──────┘
```

### 3.1 导航菜单（15 项 → 分组）

| 分组 | 菜单项 | 图标 | 路由 |
|------|--------|------|------|
| **核心** | 交易仪表盘 | 📈 | `/dashboard` |
| | 交易计划 | 🧭 | `/plans` |
| | 交易日志 | 📝 | `/journal` |
| **分析** | 市场热点 | 🔥 | `/hotspots` |
| | 持仓评估 | 📊 | `/positions` |
| | 宏观分析 | 🌍 | `/macro` |
| | 策略筛选 | 🔍 | `/opportunities` |
| | 股票分析 | 🤖 | `/advice` |
| **风控** | 行为评分 | 🎯 | `/behavior` |
| | 资金曲线 | 💰 | `/equity` |
| | 价格告警 | 🔔 | `/alerts` |
| **系统** | API 监控 | 📡 | `/api-monitoring` |
| | 系统健康 | 🩺 | `/monitoring` |

---

## 4. 新增页面设计

### 4.1 交易仪表盘 (Dashboard) — 首页

```
┌─────────────────────────────────────────────────────────┐
│ 📈 Trading Dashboard                          [刷新]   │
├─────────────┬─────────────┬──────────────┬─────────────┤
│ 💰 总权益    │ 💵 今日盈亏  │ 📋 计划执行率 │ ⚠️ 风险等级 │
│  $125,430   │  +$1,230    │  3/5 (60%)   │  MEDIUM     │
│  +2.3% MTD  │  +0.98%     │  ⚠️ <80%    │  🟡         │
├─────────────┴─────────────┴──────────────┴─────────────┤
│ 🌊 Greeks 水位                                          │
│ Delta ████████░░ 72%  Gamma ██░░░░░░░░ 18%             │
│ Vega  █████░░░░░ 45%  Theta ███░░░░░░░ 28%             │
├────────────────────────────────────────────────────────┤
│ 📈 资金曲线（近30天）                      [30D][90D]   │
│         ╱──╲     ╱╲                                    │
│    ──╱╱     ╲──╱╱  ╲──  ── 我的组合                    │
│    ──────────────────── ── SPY 基准                     │
├────────────────────────────────────────────────────────┤
│ 🔔 实时信号 & 待办                                      │
│ ● AAPL 触及止损位 $178.50         [查看计划] 2min ago   │
│ ● NVDA MACD金叉信号触发           [查看详情] 15min ago  │
│ ● 2 个计划今日到期                 [处理]               │
│ ● TSLA 价格告警: 突破 $250        [查看] 1h ago        │
└────────────────────────────────────────────────────────┘
```

**交互规范**：
- 账户数据每 30s 自动刷新（WebSocket 优先，降级轮询）
- Greeks 水位超限红色闪烁
- 信号列表按时间倒序，最多显示 10 条，更多可展开
- 资金曲线支持 30D/90D/YTD/ALL 切换

### 4.2 资金曲线页 (Equity)

```
┌───────────────────────────────────────────────────────┐
│ 💰 资金曲线 & PnL 归因                       [刷新]   │
├────────────────────────────────────────────────────────┤
│ [摘要条]                                               │
│ 总收益: +$12,340 (+10.2%)  最大回撤: -4.3%            │
│ Sharpe: 1.45  胜率: 62%  盈亏比: 2.1                  │
├────────────────────────────────────────────────────────┤
│ 📈 净值曲线                        [30D][90D][YTD][ALL]│
│ ECharts 折线图: 我的组合 vs SPY                        │
│ 最大回撤区间高亮标注                                    │
├────────────────────────────────────────────────────────┤
│ 📊 月度盈亏                                            │
│ ECharts 柱状图: 每月已实现盈亏                         │
├────────────────────────────────────────────────────────┤
│ 🔍 PnL 归因                              [按标的][按策略]│
│ ECharts 瀑布图 / 饼图                                  │
└────────────────────────────────────────────────────────┘
```

### 4.3 交易日志页 (Journal)

```
┌────────────────────────────────────────────────────────┐
│ 📝 交易日志                     [新建] [AI 周报] [刷新] │
├────────────────────────────────────────────────────────┤
│ [筛选条] 日期范围 | 标的 | 状态                         │
├────────────────────────────────────────────────────────┤
│ ┌──────────────────────────────────────────────────┐   │
│ │ 2026-02-08  AAPL  买入→卖出  +$450  ⭐⭐⭐⭐     │   │
│ │ 情绪: 😌 calm  错误: 无  关联计划: Plan#12       │   │
│ │ AI复盘: 执行质量良好，入场点位精准...             │   │
│ │ [编辑] [AI复盘]                                   │   │
│ └──────────────────────────────────────────────────┘   │
│ ┌──────────────────────────────────────────────────┐   │
│ │ 2026-02-07  NVDA  买入(持有)  -$120  ⭐⭐⭐       │   │
│ │ 情绪: 😰 anxious  错误: 追高  关联计划: Plan#15  │   │
│ │ AI复盘: 入场偏离计划入场价 3.2%，建议...          │   │
│ └──────────────────────────────────────────────────┘   │
├────────────────────────────────────────────────────────┤
│ [JournalGuideline] 如何写好交易日志                      │
└────────────────────────────────────────────────────────┘
```

### 4.4 价格告警页 (Alerts)

```
┌──────────────────────────────────────────────────────┐
│ 🔔 价格告警                               [新建] [刷新]│
├──────────────────────────────────────────────────────┤
│ [活跃告警]                                             │
│ ┌────────────────────────────────────────────────┐    │
│ │ AAPL  价格下穿 $175.00 (止损)  🟢 活跃         │    │
│ │ 关联: Plan#12  动作: 通知  创建: 2026-02-08    │    │
│ │ [编辑] [删除] [暂停]                            │    │
│ └────────────────────────────────────────────────┘    │
│ ┌────────────────────────────────────────────────┐    │
│ │ NVDA  RSI > 70  🟢 活跃                        │    │
│ │ 动作: 通知  创建: 2026-02-07                   │    │
│ └────────────────────────────────────────────────┘    │
├──────────────────────────────────────────────────────┤
│ [触发历史] (最近10条)                                   │
│ 2026-02-08 14:30  TSLA 突破 $250  ✅ 已通知            │
│ 2026-02-07 10:15  AAPL 触及 $178  ✅ 已通知            │
└──────────────────────────────────────────────────────┘
```

---

## 5. 现有页面改造

### 5.1 首页路由变更

- `/` → 重定向到 `/dashboard`（原为 `/hotspots`）

### 5.2 持仓评估增强

- 接入资金曲线迷你图（sparkline）
- 组合 Beta 显示
- 压力测试结果展示（-5%/-10% 模拟）

### 5.3 策略筛选

- 整合 ExecutionListPage（消除重复）
- 接入真实信号引擎结果
- 显示因子贡献度

### 5.4 行为评分

- 挂载 GreeksWaterLevel 水位组件

---

## 6. 新增组件

| 组件 | 用途 | 页面 |
|------|------|------|
| `DashboardSummaryBar.vue` | 顶部 KPI 卡片组 | Dashboard |
| `EquityCurveChart.vue` | ECharts 资金曲线 | Dashboard / Equity |
| `MonthlyPnlChart.vue` | 月度盈亏柱状图 | Equity |
| `PnlAttributionChart.vue` | PnL 归因图 | Equity |
| `SignalFeed.vue` | 实时信号列表 | Dashboard |
| `JournalCard.vue` | 交易日志卡片 | Journal |
| `JournalFormModal.vue` | 日志编辑弹窗 | Journal |
| `AlertCard.vue` | 告警规则卡片 | Alerts |
| `AlertFormModal.vue` | 告警编辑弹窗 | Alerts |
| `AlertHistoryList.vue` | 告警历史列表 | Alerts |
| `OrderConfirmModal.vue` | 订单确认弹窗 | 全局 |
| `WebSocketIndicator.vue` | WS 连接状态指示 | 侧边栏 |
| `DashboardGuideline.vue` | Dashboard 说明 | Dashboard |
| `JournalGuideline.vue` | Journal 说明 | Journal |
| `EquityGuideline.vue` | 资金曲线说明 | Equity |
| `AlertsGuideline.vue` | 告警说明 | Alerts |

---

## 7. WebSocket 实时通道

### 7.1 频道设计

| 频道 | 数据 | 更新频率 |
|------|------|---------|
| `price_alert` | 价格告警触发 | 实时 |
| `signal_fired` | 策略信号触发 | 实时 |
| `order_update` | 订单状态变更 | 实时 |
| `risk_warning` | 风控预警 | 实时 |
| `equity_update` | 账户权益更新 | 30s |

### 7.2 前端处理

- 使用 Pinia store 统一管理 WebSocket 状态
- 自动重连（指数退避，最大 30s）
- 心跳检测（30s ping/pong）
- 侧边栏显示连接状态指示灯

---

## 8. 状态管理升级（Pinia）

### 8.1 Store 设计

| Store | 职责 |
|-------|------|
| `useDashboardStore` | 仪表盘数据缓存 + WebSocket 更新 |
| `useWebSocketStore` | WS 连接状态 + 消息分发 |
| `useAlertStore` | 告警规则 + 触发历史 |
| `useEquityStore` | 资金曲线数据 |
| `useJournalStore` | 交易日志列表 |
| `useOrderStore` | 订单状态追踪 |

---

## 9. 视觉规范（继承 + 扩展）

### 9.1 色彩扩展

| 状态 | 颜色 | 用途 |
|------|------|------|
| 盈利 | `#22c55e` | 正收益 |
| 亏损 | `#ef4444` | 负收益 |
| 信号 | `#a78bfa` | 策略信号 |
| 告警 | `#f59e0b` | 价格告警 |
| WebSocket | `#38bdf8` → `#22c55e` | 连接/已连接 |

### 9.2 ECharts 主题

- 深色背景：`#0f172a`
- 网格线：`rgba(255,255,255,0.06)`
- 盈利线：`#22c55e`
- 亏损线：`#ef4444`
- 基准线：`#64748b`

### 9.3 动画规范

- 数据更新：数字跳动动画（0.3s ease-out）
- 新信号：左侧滑入 + 背景高亮 2s 渐隐
- WebSocket 重连：状态灯闪烁

---

## 10. 响应式 & 无障碍

- 最小宽度：1024px（桌面优先）
- 卡片自适应：Grid auto-fill, minmax(360px, 1fr)
- 关键数据 aria-label 标注
- 图表提供文字摘要 alt

---

**文档维护者**：AI Trading Team  
**最后更新**：2026-02-09
